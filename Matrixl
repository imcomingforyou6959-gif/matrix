if Library then
    Library:Unload()
end
loadstring(game:HttpGet('https://raw.githubusercontent.com/yuvic123/SKIDO-V3/refs/heads/main/fixed%20fireclick'))()

local Library = loadstring(game:HttpGet('https://pastefy.app/ejq6tMOA/raw'))()
local Flags = {}

Library.Flags = Flags

local Window = Library:Window({
    Logo = '125375362621484',
    FadeTime = 0.3,
})
local Colors = {
    Background = Color3.fromRGB(250, 248, 245),
    Primary = Color3.fromRGB(147, 179, 141),
    Secondary = Color3.fromRGB(200, 220, 195),
    Accent = Color3.fromRGB(119, 158, 113),
    White = Color3.fromRGB(255, 255, 255),
    Text = Color3.fromRGB(80, 80, 80),
    TextLight = Color3.fromRGB(120, 120, 120),
    Border = Color3.fromRGB(220, 218, 215),
    Shadow = Color3.fromRGB(200, 198, 195),
}

game:GetService('TextChatService'):FindFirstChild('ChatWindowConfiguration').Enabled = true
game.Players.LocalPlayer.Character.Humanoid.Health = 0

local Watermark = Library:Watermark()
local KeybindList = Library:KeybindList()
local LocalPlayer = game:GetService('Players').LocalPlayer
local Players = game:GetService('Players')
local ReplicatedStorage = game:GetService('ReplicatedStorage')
local RunService = game:GetService('RunService')
local UserInputService = game:GetService('UserInputService')
local Core = nil
local BodyVelocity = nil
local lastPosition = nil
local oldPosition = nil
local lockedTarget = nil
local predictionMultiplier = Flags.PredictValue
local targetlist = {}
local selectedPlayerName = nil

Flags.multiTargetEnabled = false
Flags.StickyAimEnabled = true
Flags.TracerEnabled = true
Flags.ViewTargetEnabled = false
Flags.TargetHitPart = 'Head'
Flags.TargetToMouseTracer = true
Flags.GrabCheckEnabled = true
Flags.KOCheckEnabled = true
Flags.FriendCheckEnabled = false
Flags.AutoKill = false
Flags.StrafeMode = 'Random'
Flags.StompTargetEnabled = false
Flags.PredictValue = 1
Flags.HiddenBulletsEnabled = true
Flags.AutoAmmoEnabled = true
Flags.StrafeWasEnabledBeforeAmmoBuy = false
Flags.Tracer_Color = Color3.new(1, 1, 1)

local Stats = game:GetService('Stats')

local function getPing()
    return Stats.Network.ServerStatsItem['Data Ping']:GetValue() / 1000
end
local function getPredictedPosition(part)
    if not part or not part.Parent then
        return part.Position
    end

    local velocity = part.Velocity
    local speed = velocity.Magnitude

    if speed <= 200 or speed > 1200 then
        return part.Position
    end

    local ping = getPing()
    local prediction = velocity * (ping + Flags.PredictValue)

    return part.Position + prediction
end

function predictPosition(targetRoot, predictionMultiplier)
    if not targetRoot then
        return nil
    end

    local velocity = targetRoot.Velocity
    local speed = velocity.Magnitude

    if speed <= 200 or speed > 1200 then
        return targetRoot.Position
    end

    local ping = getPing()
    local prediction = velocity * (ping + predictionMultiplier)

    return targetRoot.Position + prediction
end

local function CreateNotification(message_text, duration)
    duration = duration or 3

    local tween_service = game:GetService('TweenService')
    local screen_gui = Instance.new('ScreenGui')

    screen_gui.Name = 'notification'
    screen_gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screen_gui.IgnoreGuiInset = true
    screen_gui.Parent = game.CoreGui

    local temp_text = Instance.new('TextLabel')

    temp_text.Text = message_text
    temp_text.Font = Enum.Font.Gotham
    temp_text.TextSize = 14
    temp_text.TextWrapped = false
    temp_text.Visible = false
    temp_text.Parent = screen_gui

    local text_size = temp_text.TextBounds.X + 40

    temp_text:Destroy()

    local main_frame = Instance.new('Frame')

    main_frame.Size = UDim2.new(0, text_size, 0, 40)
    main_frame.Position = UDim2.new(0.5, 0, 1.1, 0)
    main_frame.AnchorPoint = Vector2.new(0.5, 1)
    main_frame.BackgroundTransparency = 1
    main_frame.BorderSizePixel = 0
    main_frame.Parent = screen_gui

    local content_frame = Instance.new('Frame')

    content_frame.Size = UDim2.new(1, 0, 1, 0)
    content_frame.BackgroundColor3 = Colors.Background
    content_frame.BorderSizePixel = 0
    content_frame.Parent = main_frame

    local corner = Instance.new('UICorner')

    corner.CornerRadius = UDim.new(0, 10)
    corner.Parent = content_frame

    local inner_frame = Instance.new('Frame')

    inner_frame.Size = UDim2.new(1, -4, 1, -4)
    inner_frame.Position = UDim2.new(0, 2, 0, 2)
    inner_frame.BackgroundColor3 = Colors.White
    inner_frame.BorderSizePixel = 0
    inner_frame.Parent = content_frame

    local inner_corner = Instance.new('UICorner')

    inner_corner.CornerRadius = UDim.new(0, 8)
    inner_corner.Parent = inner_frame

    local border_stroke = Instance.new('UIStroke')

    border_stroke.Color = Colors.Border
    border_stroke.Thickness = 1
    border_stroke.Transparency = 0.5
    border_stroke.Parent = content_frame

    local text_label = Instance.new('TextLabel')

    text_label.Size = UDim2.new(1, 0, 1, 0)
    text_label.BackgroundTransparency = 1
    text_label.Text = message_text
    text_label.TextColor3 = Colors.Primary
    text_label.TextSize = 14
    text_label.TextXAlignment = Enum.TextXAlignment.Center
    text_label.TextYAlignment = Enum.TextYAlignment.Center
    text_label.Font = Enum.Font.Gotham
    text_label.Parent = inner_frame

    local bar_horizontal = Instance.new('Frame')

    bar_horizontal.Size = UDim2.new(1, 0, 0, 3)
    bar_horizontal.Position = UDim2.new(0.5, 0, 1, -1)
    bar_horizontal.AnchorPoint = Vector2.new(0.5, 1)
    bar_horizontal.BackgroundColor3 = Colors.Secondary
    bar_horizontal.BorderSizePixel = 0
    bar_horizontal.Parent = inner_frame

    local bar_corner = Instance.new('UICorner')

    bar_corner.CornerRadius = UDim.new(0, 2)
    bar_corner.Parent = bar_horizontal

    local tween_in = tween_service:Create(main_frame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
        Position = UDim2.new(0.5, 0, 0.9, 0),
    })

    tween_in:Play()
    tween_in.Completed:Wait()

    local tween_bar_h = tween_service:Create(bar_horizontal, TweenInfo.new(duration, Enum.EasingStyle.Linear), {
        Size = UDim2.new(0, 0, 0, 3),
    })

    tween_bar_h:Play()
    wait(duration)

    local tween_out = tween_service:Create(main_frame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
        Position = UDim2.new(0.5, 0, 1.1, 0),
    })

    tween_out:Play()
    tween_out.Completed:Wait()
    screen_gui:Destroy()
end

local tracer = Drawing.new('Line')

tracer.Visible = false
tracer.Thickness = 1
tracer.Color = Flags.Tracer_Color

local MainPage = Window:Page({
    Name = 'Main',
    SubPages = true,
})
local VisualsPage = Window:Page({
    Name = 'Visuals',
    Columns = 2,
})
local CharacterPage = Window:Page({
    Name = 'Character',
    Columns = 2,
})
local PlayersPage = Window:Page({
    Name = 'Players',
    Columns = 2,
})
local MiscPage = Window:Page({
    Name = 'Misc',
    Columns = 2,
})
local SettingsPage = Library:CreateSettingsPage(Window, Watermark, KeybindList)
local TargetSubPage = MainPage:SubPage({
    Name = 'Target',
    Columns = 2,
})
local MiscSubPage = MainPage:SubPage({
    Name = 'Misc',
    Columns = 2,
})
local TargetingSection = TargetSubPage:Section({
    Name = 'Targeting',
    Side = 1,
})
local Playerlist = PlayersPage:Playerlist({
    Callback = function(Player)
        if not Flags.multiTargetEnabled then
            lockedTarget = Player

            CreateNotification('Selected player: ' .. Player.DisplayName, 3)
        else
            local found = false

            for i, plr in ipairs(targetlist)do
                if plr == Player then
                    table.remove(targetlist, i)

                    found = true

                    break
                end
            end

            if found then
                CreateNotification('Removed: ' .. Player.DisplayName, 3)
            else
                table.insert(targetlist, Player)
                CreateNotification('Added: ' .. Player.DisplayName, 3)
            end

            selectLockedFromList()
        end

        updateTargetLabel()
    end,
})
local targetLabel = TargetingSection:Label('Target: None')

local function updateTargetLabel()
    if Flags.multiTargetEnabled then
        local names = {}

        for _, t in ipairs(targetlist)do
            table.insert(names, t.DisplayName)
        end

        targetLabel:SetText('Targets: ' .. (#names > 0 and table.concat(names, ', ') or 'None'))
    else
        targetLabel:SetText('Target: ' .. (lockedTarget and lockedTarget.DisplayName or 'None'))
    end
end

TargetingSection:Toggle({
    Name = 'Enabled',
    Flag = 'StickyAimEnabled',
    Default = true,
    Callback = function(Value)
        if not Value then
            lockedTarget = nil
            targetlist = {}
            workspace.CurrentCamera.CameraSubject = LocalPlayer.Character:FindFirstChild('Humanoid')

            updateTargetLabel()
        end
    end,
}):Keybind({
    Flag = 'Select_Target',
    Default = Enum.KeyCode.Q,
    Mode = 'Toggle',
    Callback = function(Value)
        if UserInputService:GetFocusedTextBox() then
            return
        end
        if Flags.multiTargetEnabled then
            local camera = workspace.CurrentCamera
            local mouseLocation = UserInputService:GetMouseLocation()
            local closestTarget, closestDistance = nil, math.huge

            for _, otherPlayer in ipairs(Players:GetPlayers())do
                if otherPlayer ~= LocalPlayer and otherPlayer.Character and otherPlayer.Character:FindFirstChild(Flags.TargetHitPart) then
                    local bodyEffects = otherPlayer.Character:FindFirstChild('BodyEffects')
                    local isKO = bodyEffects and bodyEffects:FindFirstChild('K.O') and bodyEffects['K.O'].Value
                    local isGrabbed = otherPlayer.Character:FindFirstChild('GRABBING_CONSTRAINT')

                    if (not Flags.GrabCheckEnabled or not isGrabbed) and (not Flags.FriendCheckEnabled or not LocalPlayer:IsFriendsWith(otherPlayer.UserId)) then
                        local targetPart = otherPlayer.Character[Flags.TargetHitPart]
                        local screenPosition, onScreen = camera:WorldToViewportPoint(targetPart.Position)

                        if onScreen then
                            local distance = (Vector2.new(screenPosition.X, screenPosition.Y) - mouseLocation).Magnitude

                            if distance < closestDistance then
                                closestTarget = otherPlayer
                                closestDistance = distance
                            end
                        end
                    end
                end
            end

            if closestTarget then
                local index = nil

                for i, t in ipairs(targetlist)do
                    if t == closestTarget then
                        index = i

                        break
                    end
                end

                if index then
                    table.remove(targetlist, index)
                else
                    table.insert(targetlist, closestTarget)
                end
            end
        else
            if lockedTarget then
                lockedTarget = nil
                workspace.CurrentCamera.CameraSubject = LocalPlayer.Character:FindFirstChild('Humanoid')
            else
                local camera = workspace.CurrentCamera
                local mouseLocation = UserInputService:GetMouseLocation()
                local closestTarget, closestDistance = nil, math.huge

                for _, otherPlayer in ipairs(Players:GetPlayers())do
                    if otherPlayer ~= LocalPlayer and otherPlayer.Character and otherPlayer.Character:FindFirstChild(Flags.TargetHitPart) then
                        local bodyEffects = otherPlayer.Character:FindFirstChild('BodyEffects')
                        local isKO = bodyEffects and bodyEffects:FindFirstChild('K.O') and bodyEffects['K.O'].Value
                        local isGrabbed = otherPlayer.Character:FindFirstChild('GRABBING_CONSTRAINT')

                        if (not Flags.GrabCheckEnabled or not isGrabbed) and (not Flags.FriendCheckEnabled or not LocalPlayer:IsFriendsWith(otherPlayer.UserId)) then
                            local targetPart = otherPlayer.Character[Flags.TargetHitPart]
                            local screenPosition, onScreen = camera:WorldToViewportPoint(targetPart.Position)

                            if onScreen then
                                local distance = (Vector2.new(screenPosition.X, screenPosition.Y) - mouseLocation).Magnitude

                                if distance < closestDistance then
                                    closestTarget = otherPlayer
                                    closestDistance = distance
                                end
                            end
                        end
                    end
                end

                if closestTarget then
                    lockedTarget = closestTarget
                end
            end
        end

        updateTargetLabel()
    end,
})

local function selectLockedFromList()
    if #targetlist == 0 then
        lockedTarget = nil

        return
    end

    local myRoot = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild('HumanoidRootPart')

    if not myRoot then
        lockedTarget = nil

        return
    end

    local myPos = myRoot.Position
    local priority = {}
    local normal = {}

    for _, tgt in ipairs(targetlist)do
        if tgt and tgt.Character and tgt.Character:FindFirstChild(Flags.TargetHitPart) then
            local bodyEffects = tgt.Character:FindFirstChild('BodyEffects')
            local isKO = bodyEffects and bodyEffects:FindFirstChild('K.O') and bodyEffects['K.O'].Value
            local isSDeath = bodyEffects and bodyEffects:FindFirstChild('SDeath') and bodyEffects.SDeath.Value
            local isGrabbed = tgt.Character:FindFirstChild('GRABBING_CONSTRAINT')
            local hasFF = tgt.Character:FindFirstChildOfClass('ForceField')

            if not hasFF and not isKO and not isSDeath and not isGrabbed then
                table.insert(priority, tgt)
            else
                table.insert(normal, tgt)
            end
        end
    end

    local useList = #priority > 0 and priority or normal

    if #useList == 0 then
        lockedTarget = nil

        return
    end

    local closest, dist = nil, math.huge

    for _, tgt in ipairs(useList)do
        local tgtRoot = tgt.Character:FindFirstChild('HumanoidRootPart')

        if tgtRoot then
            local distance = (myPos - tgtRoot.Position).Magnitude

            if distance < dist then
                closest = tgt
                dist = distance
            end
        end
    end

    lockedTarget = closest
end

TargetingSection:Toggle({
    Name = 'Multi Target',
    Flag = 'multiTargetEnabled',
    Default = false,
    Callback = function(Value)
        if not Value then
            targetlist = {}
            lockedTarget = nil
        end

        updateTargetLabel()
    end,
})

local Button = TargetingSection:Button()

Button:Add('Set All Players', function()
    if not Flags.multiTargetEnabled then
        CreateNotification('Please enable Multi Target first!', 4)

        return
    end

    targetlist = {}

    local addedCount = 0

    for _, player in ipairs(Players:GetPlayers())do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild('HumanoidRootPart') then
            table.insert(targetlist, player)

            addedCount = addedCount + 1
        end
    end

    selectLockedFromList()
    updateTargetLabel()
    CreateNotification('Added ' .. addedCount .. ' players to target list', 4)
end)
Button:Add('Remove All Targets', function()
    local before = #targetlist

    targetlist = {}
    lockedTarget = nil

    selectLockedFromList()
    updateTargetLabel()

    if before > 0 then
        CreateNotification('Cleared ' .. before .. ' targets', 3)
    else
        CreateNotification('Target list already empty', 3)
    end
end)
Button:Add('Tp to Target', function()
    if lockedTarget and lockedTarget.Character and lockedTarget.Character:FindFirstChild('HumanoidRootPart') and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild('HumanoidRootPart') then
        LocalPlayer.Character.HumanoidRootPart.CFrame = lockedTarget.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, -3)
    end
end)

local tracers = {}

TargetingSection:Toggle({
    Name = 'Tracer Target',
    Flag = 'TracerEnabled',
    Default = true,
}):Colorpicker({
    Name = 'TracerColor',
    Flag = 'Tracer_Color',
    Default = Color3.new(1, 1, 1),
    Alpha = 0,
    Callback = function(Value)
        Flags.Tracer_Color = Value
    end,
})
TargetingSection:Dropdown({
    Name = 'Tracer Mode',
    Flag = 'TargetToMouseTracer',
    Default = 'HumanoidRootPart',
    Multi = false,
    Items = {
        'Mouse',
        'HumanoidRootPart',
    },
    Callback = function(Value)
        Flags.TargetToMouseTracer = (Value == 'Mouse')
    end,
})
TargetingSection:Toggle({
    Name = 'Spectate Target',
    Flag = 'Vhuyhandsome',
    Default = false,
    Callback = function(Value)
        if not Value then
            Flags.ViewTargetEnabled = false
            workspace.CurrentCamera.CameraSubject = LocalPlayer.Character:FindFirstChild('Humanoid')
        end
    end,
}):Keybind({
    Flag = 'ViewTargetEnabledd',
    Default = Enum.KeyCode.B,
    Mode = 'Toggle',
    Callback = function(Value)
        Flags.ViewTargetEnabled = not Flags.ViewTargetEnabled

        if Flags.ViewTargetEnabled and lockedTarget then
            workspace.CurrentCamera.CameraSubject = lockedTarget.Character
        else
            workspace.CurrentCamera.CameraSubject = LocalPlayer.Character:FindFirstChild('Humanoid')
        end
    end,
})
TargetingSection:Dropdown({
    Name = 'Hit Part',
    Flag = 'TargetHitPart',
    Default = 'Head',
    Multi = false,
    Items = {
        'Head',
        'HumanoidRootPart',
        'UpperTorso',
        'Left Arm',
        'Right Arm',
        'Left Leg',
        'Right Leg',
    },
})
TargetingSection:Toggle({
    Name = 'Stomp Target',
    Flag = 'StompTargetEnabled',
    Default = false,
})
TargetingSection:Toggle({
    Name = 'invisible bullets',
    Flag = 'HiddenBulletsEnabled',
    Default = true,
})

local TargetSection = TargetSubPage:Section({
    Name = 'Target',
    Side = 2,
})

TargetSection:Toggle({
    Name = 'Autokill enabled',
    Flag = 'AutoKill',
    Default = false,
    Callback = function(Value)
        if UserInputService:GetFocusedTextBox() then
            return
        end
        if not Flags.AutoKill then
            if Core then
                Core:Destroy()

                Core = nil
            end
            if BodyVelocity then
                BodyVelocity:Destroy()

                BodyVelocity = nil
            end

            workspace.CurrentCamera.CameraSubject = LocalPlayer.Character:FindFirstChild('Humanoid')
        end
    end,
}):Keybind({
    Flag = 'Strafe_Keybind',
    Default = Enum.KeyCode.N,
    Mode = 'Toggle',
    Callback = function(Value)
        if UserInputService:GetFocusedTextBox() then
            return
        end

        Flags.AutoKill = not Flags.AutoKill

        if not Flags.AutoKill then
            if Core then
                Core:Destroy()

                Core = nil
            end
            if BodyVelocity then
                BodyVelocity:Destroy()

                BodyVelocity = nil
            end

            workspace.CurrentCamera.CameraSubject = LocalPlayer.Character:FindFirstChild('Humanoid')
        end
    end,
})
TargetSection:Dropdown({
    Name = 'Strafe Mode',
    Flag = 'StrafeMode',
    Default = 'Random',
    Multi = false,
    Items = {
        'Random',
        'Hide',
    },
})

local UIS = game:GetService('UserInputService')
local RunService = game:GetService('RunService')
local StatusGui = Instance.new('ScreenGui')

StatusGui.Name = 'TargetStatusGui'
StatusGui.ResetOnSpawn = false
StatusGui.IgnoreGuiInset = true
StatusGui.Parent = game.CoreGui

local Text = Instance.new('TextLabel', StatusGui)

Text.BackgroundTransparency = 1
Text.Size = UDim2.new(0, 200, 0, 20)
Text.AnchorPoint = Vector2.new(0, 0)
Text.TextXAlignment = Enum.TextXAlignment.Left
Text.TextYAlignment = Enum.TextYAlignment.Center
Text.Font = Enum.Font.Gotham
Text.TextSize = 16
Text.TextColor3 = Color3.fromRGB(255, 255, 255)
Text.TextStrokeTransparency = 0.5
Text.Text = ''

RunService.RenderStepped:Connect(function()
    local m = UIS:GetMouseLocation()

    Text.Position = UDim2.fromOffset(m.X + 1, m.Y + 14)
end)

function updateTargetStatus()
    if not Flags or not Flags.AutoKill then
        Text.Text = ''

        return
    end
    if not lockedTarget or not lockedTarget.Character then
        Text.Text = 'No Target'

        return
    end

    local char = lockedTarget.Character
    local be = char:FindFirstChild('BodyEffects')
    local isKO = be and be:FindFirstChild('K.O') and be['K.O'].Value
    local hasFF = char:FindFirstChildOfClass('ForceField')

    if hasFF then
        Text.Text = 'Target Has ForceField - hiding'

        return
    end
    if isKO and Flags.StompTargetEnabled then
        Text.Text = 'Stomp - Name:' .. lockedTarget.DisplayName
    else
        Text.Text = 'Killing - Name:' .. lockedTarget.DisplayName
    end
end

local function checkVoid()
    if lockedTarget and lockedTarget.Character then
        local pos = lockedTarget.Character.HumanoidRootPart.CFrame.Position

        if pos.X < -7E3 or pos.X > 7000 or pos.Y < -7E3 or pos.Y > 7000 or pos.Z < -7E3 or pos.Z > 7000 then
            LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(math.random(-777, 777), math.random(0, 777), math.random(-777, 777))
            Text.Text = 'Target in void - hide around map'
        end
    end
end
local function getCurrentGun()
    local tool = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass('Tool')

    if tool then
        return tool.Name
    end

    return nil
end
local function getAmmoCount(gunName)
    local inventory = LocalPlayer.DataFolder.Inventory
    local ammo = inventory:FindFirstChild(gunName)

    if ammo then
        return tonumber(ammo.Value) or 0
    end

    return 0
end
local function buyAmmo(gunName)
    local ShopFolder = Workspace:WaitForChild('Ignored'):WaitForChild('Shop')
    local AmmoMap = {
        ['[AUG]'] = '90 [AUG Ammo] - $90',
        ['[LMG]'] = '200 [LMG Ammo] - $338',
        ['[Rifle]'] = '5 [Rifle Ammo] - $281',
    }
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild('HumanoidRootPart')
    local Saveddd = hrp.CFrame
    local ammoItemName = AmmoMap[gunName]

    if not ammoItemName then
        return
    end

    local ammoItem = ShopFolder:FindFirstChild(ammoItemName)

    if not ammoItem then
        return
    end

    local oldPosition = LocalPlayer.Character.HumanoidRootPart.CFrame
    local currentTool = LocalPlayer.Character:FindFirstChildOfClass('Tool')

    if currentTool then
        currentTool.Parent = LocalPlayer.Backpack
    end

    hrp.CFrame = ammoItem.Head.CFrame

    local clickDetector = ammoItem:FindFirstChild('ClickDetector')

    if clickDetector then
        fireclickdetector(clickDetector)
    end
    if currentTool then
        currentTool.Parent = LocalPlayer.Character
    end

    RunService:BindToRenderStep('ammobuy', 199, function()
        hrp.CFrame = Saveddd

        RunService:UnbindFromRenderStep('ammobuy')
    end)
end
local function checkAmmoAndBuy()
    if not Flags.AutoAmmoEnabled then
        return
    end

    local gunName = getCurrentGun()

    if not gunName then
        return
    end

    local ammoCount = getAmmoCount(gunName)

    if ammoCount <= 0 then
        if Flags.AutoKill then
            Flags.StrafeWasEnabledBeforeAmmoBuy = true
            Flags.AutoKill = false
        end
        if Core then
            Core:Destroy()

            Core = nil
        end
        if BodyVelocity then
            BodyVelocity:Destroy()

            BodyVelocity = nil
        end

        buyAmmo(gunName)

        if Flags.StrafeWasEnabledBeforeAmmoBuy then
            Flags.AutoKill = true
            Flags.StrafeWasEnabledBeforeAmmoBuy = false
        end
    end
end

Flags.Hitsounds = {
    Bubble = 'rbxassetid://6534947588',
    Lazer = 'rbxassetid://130791043',
    Pick = 'rbxassetid://1347140027',
    Pop = 'rbxassetid://198598793',
    Rust = 'rbxassetid://1255040462',
    Sans = 'rbxassetid://3188795283',
    Fart = 'rbxassetid://130833677',
    Big = 'rbxassetid://5332005053',
    Vine = 'rbxassetid://5332680810',
    UwU = 'rbxassetid://8679659744',
    Bruh = 'rbxassetid://4578740568',
    Skeet = 'rbxassetid://5633695679',
    Neverlose = 'rbxassetid://6534948092',
    Fatality = 'rbxassetid://6534947869',
    Bonk = 'rbxassetid://5766898159',
    Minecraft = 'rbxassetid://5869422451',
    Gamesense = 'rbxassetid://4817809188',
    RIFK7 = 'rbxassetid://9102080552',
    Bamboo = 'rbxassetid://3769434519',
    Crowbar = 'rbxassetid://546410481',
    Weeb = 'rbxassetid://6442965016',
    Beep = 'rbxassetid://8177256015',
    Bambi = 'rbxassetid://8437203821',
    Stone = 'rbxassetid://3581383408',
    ['Old Fatality'] = 'rbxassetid://6607142036',
    Click = 'rbxassetid://8053704437',
    Ding = 'rbxassetid://7149516994',
    Snow = 'rbxassetid://6455527632',
    Laser = 'rbxassetid://7837461331',
    Mario = 'rbxassetid://2815207981',
    Steve = 'rbxassetid://4965083997',
    ['Call of Duty'] = 'rbxassetid://5952120301',
    Bat = 'rbxassetid://3333907347',
    ['TF2 Critical'] = 'rbxassetid://296102814',
    Saber = 'rbxassetid://8415678813',
    Baimware = 'rbxassetid://3124331820',
    Osu = 'rbxassetid://7149255551',
    TF2 = 'rbxassetid://2868331684',
    Slime = 'rbxassetid://6916371803',
    ['Among Us'] = 'rbxassetid://5700183626',
    One = 'rbxassetid://7380502345',
}
Flags.SelectedHitsound = 'Baimware'
Flags.HitsoundEnabled = true
Flags.HitsoundVolume = 1

function playHitsound()
    if Flags.HitsoundEnabled then
        local sound = Instance.new('Sound')

        sound.SoundId = Flags.Hitsounds[Flags.SelectedHitsound]
        sound.Volume = Flags.HitsoundVolume
        sound.Parent = workspace

        sound:Play()
        sound.Ended:Connect(function()
            sound:Destroy()
        end)
    end
end

local GunmodsSection = TargetSubPage:Section({
    Name = 'Gun Mods',
    Side = 2,
})

GunmodsSection:Toggle({
    Name = 'Hit Sounds',
    Flag = 'HitsoundEnabled',
    Default = true,
})
GunmodsSection:Dropdown({
    Name = 'Select HitSounds',
    Flag = 'SelectedHitsound',
    Default = 'Baimware',
    Multi = false,
    Items = {
        'Bubble',
        'Lazer',
        'Pick',
        'Pop',
        'Rust',
        'Sans',
        'Fart',
        'Big',
        'Vine',
        'UwU',
        'Bruh',
        'Skeet',
        'Neverlose',
        'Fatality',
        'Bonk',
        'Minecraft',
        'Gamesense',
        'RIFK7',
        'Bamboo',
        'Crowbar',
        'Weeb',
        'Beep',
        'Bambi',
        'Stone',
        'Old Fatality',
        'Click',
        'Ding',
        'Snow',
        'Laser',
        'Mario',
        'Steve',
        'Call of Duty',
        'Bat',
        'TF2 Critical',
        'Saber',
        'Baimware',
        'Osu',
        'TF2',
        'Slime',
        'Among Us',
        'One',
    },
})
GunmodsSection:Slider({
    Name = 'Volume',
    Flag = 'HitsoundVolume',
    Min = 1,
    Suffix = '',
    Max = 5,
    Default = 1,
    Decimals = 1,
})

Flags.AutoReloadEnabled = true

local function startAutoReload()
    _G.Connection = game:GetService('RunService').RenderStepped:Connect(function()
        if not Flags.AutoReloadEnabled then
            _G.Connection:Disconnect()

            return
        end

        local tool = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChildWhichIsA('Tool')
        local ammo = tool and tool:FindFirstChild('Ammo')

        if ammo and ammo.Value <= 0 then
            game:GetService('ReplicatedStorage').MainEvent:FireServer('Reload', tool)
            task.wait(3.7)
        end
    end)
end

GunmodsSection:Toggle({
    Name = 'Auto Reload',
    Flag = 'AutoReloadEnabled',
    Default = true,
    Callback = function(state)
        if state then
            startAutoReload()
        end
    end,
})

if Flags.AutoReloadEnabled then
    startAutoReload()
end

Flags.RemoveShootAnimationsEnabled = false

local ShootAnimationIds = {
    ['rbxassetid://2807049953'] = true,
    ['rbxassetid://2809413000'] = true,
    ['rbxassetid://2809419094'] = true,
    ['rbxassetid://507768375'] = true,
    ['rbxassetid://507755388'] = true,
    ['rbxassetid://2807049953'] = true,
    ['rbxassetid://2877910736'] = true,
}

local function StopAnimationTracks(character)
    local humanoid = character:FindFirstChildOfClass('Humanoid')

    if humanoid then
        for _, track in ipairs(humanoid:GetPlayingAnimationTracks())do
            if ShootAnimationIds[track.Animation.AnimationId] then
                track:Stop()
            end
        end
    end
end
local function MonitorCharacter(character)
    character.DescendantAdded:Connect(function(descendant)
        if descendant:IsA('AnimationTrack') and Flags.RemoveShootAnimationsEnabled then
            if ShootAnimationIds[descendant.Animation.AnimationId] then
                descendant:Stop()
            end
        end
    end)
end
local function MonitorPlayers()
    for _, player in ipairs(game:GetService('Players'):GetPlayers())do
        local character = player.Character or player.CharacterAdded:Wait()

        StopAnimationTracks(character)
        MonitorCharacter(character)
        player.CharacterAdded:Connect(function(newCharacter)
            StopAnimationTracks(newCharacter)
            MonitorCharacter(newCharacter)
        end)
    end

    game:GetService('Players').PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function(character)
            StopAnimationTracks(character)
            MonitorCharacter(character)
        end)
    end)
end

GunmodsSection:Toggle({
    Name = 'Remove Shoot Animations',
    Flag = 'RemoveShootAnimationsEnabled',
    Default = false,
    Callback = function(enabled)
        if enabled then
            MonitorPlayers()
        end
    end,
})
game:GetService('RunService').RenderStepped:Connect(function()
    if Flags.RemoveShootAnimationsEnabled then
        for _, player in ipairs(game:GetService('Players'):GetPlayers())do
            local character = player.Character

            if character then
                StopAnimationTracks(character)
            end
        end
    end
end)

local function autoEquipAllGuns()
    local backpack = LocalPlayer.Backpack
    local character = LocalPlayer.Character

    for _, tool in ipairs(backpack:GetChildren())do
        if tool:IsA('Tool') and tool:FindFirstChild('Ammo') then
            tool.Parent = character
        end
    end
end

getgenv().lastHealth = {}

Players.PlayerRemoving:Connect(function(player)
    local name = player.Name

    getgenv().lastHealth[name] = nil

    if Flags.multiTargetEnabled then
        for i, t in ipairs(targetlist)do
            if t == player then
                table.remove(targetlist, i)

                break
            end
        end
    else
        if lockedTarget == player then
            lockedTarget = nil
        end
    end

    updateTargetLabel()
end)

local targetHighlight = Instance.new('Highlight')

targetHighlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
targetHighlight.FillTransparency = 1
targetHighlight.OutlineColor = Color3.new(1, 1, 1)
targetHighlight.OutlineTransparency = 0
targetHighlight.Parent = game.CoreGui

local lastTargetHealth = {}
local targetStates = {}
local fadeStartTime = nil
local fadeDuration = 0.8
local redColor = Color3.new(1, 0, 0)
local whiteColor = Color3.new(1, 1, 1)
local blackColor = Color3.new(0, 0, 0)

local function updateHighlight(target)
    targetHighlight.Adornee = (target and target.Character) or nil
end
local function startFade()
    fadeStartTime = tick()
end

local quitMessages = {
    'has left the game... too hard? \u{1f60c}',
    'rage quit detected \u{1f602}',
    'Target alt+F4 detected \u{1f480}',
    "couldn't handle the heat",
    'disconnected from reality \u{1f914}',
    'took the L and left \u{1f480}',
}

Players.PlayerRemoving:Connect(function(plr)
    if lockedTarget and plr == lockedTarget then
        local msg = quitMessages[math.random(1, #quitMessages)]

        CreateNotification(plr.DisplayName .. ' ' .. msg, 5)

        lockedTarget = nil

        updateHighlight(nil)

        fadeStartTime = nil
    end
end)

local highlightConnection = RunService.RenderStepped:Connect(function()
    if not lockedTarget or not lockedTarget.Character then
        updateHighlight(nil)

        fadeStartTime = nil

        return
    end

    local bodyEffects = lockedTarget.Character:FindFirstChild('BodyEffects')
    local isKO = bodyEffects and bodyEffects:FindFirstChild('K.O') and bodyEffects['K.O'].Value
    local isSDeath = bodyEffects and bodyEffects:FindFirstChild('SDeath') and bodyEffects.SDeath.Value
    local humanoid = lockedTarget.Character:FindFirstChild('Humanoid')

    if not humanoid then
        return
    end
    if not targetStates[lockedTarget.Name] then
        targetStates[lockedTarget.Name] = {
            prevKO = false,
            prevDeath = false,
            lastNotify = 0,
        }
    end

    local state = targetStates[lockedTarget.Name]

    if isSDeath then
        targetHighlight.OutlineColor = blackColor
        state.prevDeath = true
        state.prevKO = false
    elseif isKO then
        targetHighlight.OutlineColor = redColor
        state.prevKO = true
        state.prevDeath = false
    else
        state.prevKO = false
        state.prevDeath = false

        if not lastTargetHealth[lockedTarget.Name] then
            lastTargetHealth[lockedTarget.Name] = humanoid.Health
        end
        if humanoid.Health < lastTargetHealth[lockedTarget.Name] then
            startFade()

            lastTargetHealth[lockedTarget.Name] = humanoid.Health
        end
        if fadeStartTime then
            local elapsed = tick() - fadeStartTime

            if elapsed < fadeDuration then
                local t = elapsed / fadeDuration

                targetHighlight.OutlineColor = redColor:Lerp(whiteColor, t)
            else
                targetHighlight.OutlineColor = whiteColor
                fadeStartTime = nil
            end
        else
            targetHighlight.OutlineColor = whiteColor
        end
    end

    updateHighlight(lockedTarget)
end)

Flags.TargetDotEnabled = false
Flags.TargetDotPrediction = true
Flags.TargetDotRadius = 6
Flags.TargetDotColor = Color3.fromRGB(255, 255, 255)
Flags.TargetDotPredictValue = 1

local TargetDot = Drawing.new('Circle')

TargetDot.Visible = false
TargetDot.Filled = true
TargetDot.Radius = 3
TargetDot.Thickness = 1

local TargetCircle = Drawing.new('Circle')

TargetCircle.Visible = false
TargetCircle.Filled = false
TargetCircle.Thickness = 1

local function getPredictedHRPPosition(hrp, multiplier)
    if not hrp then
        return nil
    end

    local vel = hrp.Velocity
    local speed = vel.Magnitude

    if speed < 1 or speed > 1200 then
        return hrp.Position
    end

    local ping = getPing()

    return hrp.Position + vel * (ping + multiplier)
end

RunService.RenderStepped:Connect(function()
    if not Flags.TargetDotEnabled then
        TargetDot.Visible = false
        TargetCircle.Visible = false

        return
    end
    if not lockedTarget or not lockedTarget.Character or not lockedTarget.Character:FindFirstChild('HumanoidRootPart') then
        TargetDot.Visible = false
        TargetCircle.Visible = false

        return
    end

    local hrp = lockedTarget.Character.HumanoidRootPart
    local cam = workspace.CurrentCamera
    local worldPos

    if Flags.TargetDotPrediction then
        worldPos = getPredictedHRPPosition(hrp, Flags.TargetDotPredictValue)
    else
        worldPos = hrp.Position
    end

    local screenPos, onScreen = cam:WorldToViewportPoint(worldPos)

    if not onScreen then
        TargetDot.Visible = false
        TargetCircle.Visible = false

        return
    end

    local vec2 = Vector2.new(screenPos.X, screenPos.Y)

    TargetDot.Position = vec2
    TargetDot.Color = Flags.TargetDotColor
    TargetDot.Visible = true
    TargetCircle.Position = vec2
    TargetCircle.Radius = Flags.TargetDotRadius
    TargetCircle.Color = Flags.TargetDotColor
    TargetCircle.Visible = true
end)
TargetingSection:Toggle({
    Name = 'Target Dot',
    Flag = 'TargetDotEnabled',
    Default = false,
}):Colorpicker({
    Name = 'Dot Color',
    Flag = 'TargetDotColor',
    Default = Color3.fromRGB(255, 255, 255),
})
TargetingSection:Toggle({
    Name = 'Dot Prediction',
    Flag = 'TargetDotPrediction',
    Default = true,
})
TargetingSection:Slider({
    Name = 'Dot Radius',
    Flag = 'TargetDotRadius',
    Min = 3,
    Max = 15,
    Default = 6,
})

local t = 0
local SavedPosition = nil

RunService.Heartbeat:Connect(function()
    checkAmmoAndBuy()
    updateTargetStatus()

    if Flags.multiTargetEnabled then
        selectLockedFromList()
    end
    if lockedTarget == nil or not lockedTarget.Parent then
        if Flags.ViewTargetEnabled then
            workspace.CurrentCamera.CameraSubject = LocalPlayer.Character:FindFirstChild('Humanoid')
        end
    end

    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild('HumanoidRootPart')
    local SavedPosition = hrp.CFrame

    if lockedTarget and lockedTarget.Character then
        local targetPart = lockedTarget.Character:FindFirstChild(Flags.TargetHitPart)
        local bodyEffects = lockedTarget.Character:FindFirstChild('BodyEffects')
        local isKO = bodyEffects and bodyEffects:FindFirstChild('K.O') and bodyEffects['K.O'].Value
        local isGrabbed = lockedTarget.Character:FindFirstChild('GRABBING_CONSTRAINT')
        local isSDeath = bodyEffects and bodyEffects:FindFirstChild('SDeath') and bodyEffects.SDeath.Value

        for _, tracer in pairs(tracers)do
            tracer:Remove()
        end

        tracers = {}

        local targetsForVisual = Flags.multiTargetEnabled and targetlist or {lockedTarget}

        for _, tgt in ipairs(targetsForVisual)do
            local tPart = tgt.Character and tgt.Character:FindFirstChild(Flags.TargetHitPart)

            if Flags.TracerEnabled and tPart then
                local tracer = Drawing.new('Line')

                tracer.Visible = true
                tracer.Thickness = 1
                tracer.Color = Flags.Tracer_Color or Color3.fromRGB(255, 255, 255)

                local camera = workspace.CurrentCamera
                local targetScreenPos, onScreen = camera:WorldToViewportPoint(tPart.Position)
                local endScreenPos

                if Flags.TargetToMouseTracer then
                    endScreenPos = UserInputService:GetMouseLocation()
                else
                    local rootPart = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild('HumanoidRootPart')

                    if rootPart then
                        local rootScreenPos, rootOnScreen = camera:WorldToViewportPoint(rootPart.Position)

                        if rootOnScreen then
                            endScreenPos = Vector2.new(rootScreenPos.X, rootScreenPos.Y)
                        end
                    end
                end
                if onScreen and endScreenPos then
                    tracer.From = Vector2.new(targetScreenPos.X, targetScreenPos.Y)
                    tracer.To = endScreenPos
                else
                    tracer.Visible = false
                end

                table.insert(tracers, tracer)
            end
        end

        local humanoid = lockedTarget.Character:FindFirstChild('Humanoid')

        if humanoid then
            if not getgenv().lastHealth[lockedTarget.Name] then
                getgenv().lastHealth[lockedTarget.Name] = humanoid.Health
            end
            if humanoid.Health < getgenv().lastHealth[lockedTarget.Name] then
                playHitsound()
            end

            getgenv().lastHealth[lockedTarget.Name] = humanoid.Health
        end
        if Flags.ViewTargetEnabled then
            workspace.CurrentCamera.CameraSubject = lockedTarget.Character
        end
        if Flags.AutoKill and lockedTarget and (lockedTarget.Character:FindFirstChildOfClass('ForceField') or isSDeath or (isKO and not Flags.StompTargetEnabled)) then
            hrp.CFrame = CFrame.new(math.random(-777, 777), math.random(0, 777), math.random(-777, 777))

            RunService:BindToRenderStep('Restorehide', 199, function()
                hrp.CFrame = SavedPosition

                RunService:UnbindFromRenderStep('Restorehide')
            end)

            return
        end
        if Flags.StompTargetEnabled and lockedTarget and isKO then
            local isDead = bodyEffects and bodyEffects:FindFirstChild('SDeath') and bodyEffects.SDeath.Value

            if isDead == false then
                hrp.CFrame = CFrame.new(lockedTarget.Character.UpperTorso.Position + Vector3.new(0, 3, 0))

                RunService:BindToRenderStep('RestoreStomp', 199, function()
                    hrp.CFrame = SavedPosition

                    RunService:UnbindFromRenderStep('RestoreStomp')
                end)

                if tick() - t >= 3 then
                    t = tick()

                    CreateNotification('Matcha - Attempted to Stomp Target: ' .. lockedTarget.Name, 3)
                end

                ReplicatedStorage.MainEvent:FireServer('Stomp')
            end

            return
        end
        if Flags.AutoKill and targetPart and not isGrabbed then
            autoEquipAllGuns()
            checkVoid()

            local targetRoot = lockedTarget.Character:FindFirstChild('HumanoidRootPart')
            local targetPosition = predictPosition(targetRoot, Flags.PredictValue)
            local randomrotation
            local offset

            if Flags.StrafeMode == 'Hide' then
                randomrotation = CFrame.Angles(math.rad(-90), 0, math.rad(90))
                offset = Vector3.new(0, -4, 0)
            elseif Flags.StrafeMode == 'Random' then
                randomrotation = CFrame.Angles(math.rad(math.random(0, 360)), math.rad(math.random(0, 360)), math.rad(math.random(0, 360)))
                offset = Vector3.new(math.random(-1, 1), math.random(-1, 1), math.random(-1, 1))
            end

            hrp.CFrame = CFrame.new(targetPosition + offset) * randomrotation

            RunService:BindToRenderStep('RestoreStafep', 199, function()
                hrp.CFrame = SavedPosition

                RunService:UnbindFromRenderStep('RestoreStafep')
            end)
        else
            LocalPlayer.Character:FindFirstChildOfClass('Humanoid').PlatformStand = false
        end

        local tool = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass('Tool')
        local handle = tool and tool:FindFirstChild('Handle')
        local targetsForShoot = Flags.multiTargetEnabled and targetlist or {lockedTarget}

        for _, tgt in ipairs(targetsForShoot)do
            local tPart = tgt.Character and tgt.Character:FindFirstChild(Flags.TargetHitPart)
            local tCharacter = tPart and tPart:FindFirstAncestorOfClass('Model')
            local tBodyEffects = tCharacter and tCharacter:FindFirstChild('BodyEffects')
            local tIsKO = tBodyEffects and tBodyEffects:FindFirstChild('K.O') and tBodyEffects['K.O'].Value
            local tIsGrabbed = tCharacter and tCharacter:FindFirstChild('GRABBING_CONSTRAINT')
            local tHasForceField = tCharacter and tCharacter:FindFirstChildOfClass('ForceField')

            if tool and handle and tPart and not tIsKO and not tIsGrabbed and not tHasForceField then
                local predictedPos = getPredictedPosition(tPart)

                if Flags.HiddenBulletsEnabled then
                    ReplicatedStorage.MainEvent:FireServer('ShootGun', handle, handle.CFrame.Position - Vector3.new(0, 10, 0), predictedPos - Vector3.new(0, 10, 0), tPart, Vector3.new(0, 0, -1))
                else
                    ReplicatedStorage.MainEvent:FireServer('ShootGun', handle, handle.CFrame.Position, predictedPos, tPart, Vector3.new(0, 0, -1))
                end
            end
        end
    else
        for _, tracer in pairs(tracers)do
            tracer:Remove()
        end

        tracers = {}
        LocalPlayer.Character:FindFirstChildOfClass('Humanoid').PlatformStand = false
    end
end)

local HitboxSection = MiscSubPage:Section({
    Name = 'Hitbox Expander',
    Side = 1,
})

Flags.HitboxSize = 15
Flags.HitboxColor = Color3.new(1, 1, 1)
Flags.VisualizeHitbox = false
Flags.HitboxExpanderEnabled = false

local Client = game.Players.LocalPlayer

HitboxSection:Toggle({
    Name = 'Hitbox Expander',
    Flag = 'HitboxExpanderEnabled',
    Default = false,
    Callback = function(state)
        if not state then
            for _, Player in pairs(Players:GetPlayers())do
                if Player ~= Client and Player.Character then
                    resetCharacter(Player.Character)
                end
            end
        end
    end,
}):Keybind({
    Flag = 'HitboxKeybind',
    Default = Enum.KeyCode.L,
    Mode = 'Toggle',
    Callback = function(state)
        if UserInputService:GetFocusedTextBox() then
            return
        end
        if not state then
            for _, Player in pairs(Players:GetPlayers())do
                if Player ~= Client and Player.Character then
                    resetCharacter(Player.Character)
                end
            end
        end
    end,
})
HitboxSection:Slider({
    Name = 'Hitbox Size',
    Flag = 'HitboxSize',
    Default = 15,
    Min = 10,
    Max = 50,
    Decimals = 1,
})

local VisualToggle = HitboxSection:Toggle({
    Name = 'Visualize Hitbox',
    Flag = 'VisualizeHitbox',
    Default = false,
    Callback = function(state)
        if not state then
            for _, Player in pairs(Players:GetPlayers())do
                if Player ~= Client and Player.Character then
                    removeVisuals(Player.Character)
                end
            end
        end
    end,
})

VisualToggle:Colorpicker({
    Name = 'Hitbox Color',
    Flag = 'HitboxColor',
    Default = Color3.new(1, 1, 1),
    Alpha = 0,
    Callback = function(color)
        Flags.HitboxColor = color
    end,
})

local function removeVisuals(Character)
    if not Character then
        return
    end

    local HRP = Character:FindFirstChild('HumanoidRootPart')

    if HRP then
        local outline = HRP:FindFirstChild('HitboxOutline')

        if outline then
            outline:Destroy()
        end

        local glow = HRP:FindFirstChild('HitboxGlow')

        if glow then
            glow:Destroy()
        end
    end
end
local function resetCharacter(Character)
    if not Character then
        return
    end

    local HRP = Character:FindFirstChild('HumanoidRootPart')

    if HRP then
        HRP.Size = Vector3.new(2, 1, 2)
        HRP.Transparency = 1
        HRP.CanCollide = true

        removeVisuals(Character)
    end
end
local function handleCharacter(Character)
    if not Character or not Flags.HitboxExpanderEnabled then
        resetCharacter(Character)

        return
    end

    local HRP = Character:FindFirstChild('HumanoidRootPart') or Character:WaitForChild('HumanoidRootPart', 5)

    if not HRP then
        return
    end

    HRP.Size = Vector3.new(Flags.HitboxSize, Flags.HitboxSize, Flags.HitboxSize)
    HRP.Transparency = 1
    HRP.CanCollide = false

    if Flags.VisualizeHitbox then
        local outline = HRP:FindFirstChild('HitboxOutline')

        if not outline then
            outline = Instance.new('BoxHandleAdornment')
            outline.Name = 'HitboxOutline'
            outline.Adornee = HRP
            outline.Size = HRP.Size
            outline.Transparency = 0.8
            outline.ZIndex = 10
            outline.AlwaysOnTop = true
            outline.Color3 = Flags.HitboxColor
            outline.Parent = HRP

            local glow = Instance.new('BoxHandleAdornment')

            glow.Name = 'HitboxGlow'
            glow.Adornee = HRP
            glow.Size = HRP.Size + Vector3.new(0.1, 0.1, 0.1)
            glow.Transparency = 0.9
            glow.ZIndex = 9
            glow.AlwaysOnTop = true
            glow.Color3 = Flags.HitboxColor
            glow.Parent = HRP
        else
            outline.Size = HRP.Size
            outline.Color3 = Flags.HitboxColor

            local glow = HRP:FindFirstChild('HitboxGlow')

            if glow then
                glow.Size = HRP.Size + Vector3.new(0.1, 0.1, 0.1)
                glow.Color3 = Flags.HitboxColor
            end
        end
    else
        removeVisuals(Character)
    end
end
local function handlePlayer(Player)
    if Player == Client then
        return
    end

    Player.CharacterAdded:Connect(function(Character)
        Character:WaitForChild('HumanoidRootPart')
        handleCharacter(Character)
    end)

    if Player.Character then
        handleCharacter(Player.Character)
    end
end

for _, Player in pairs(Players:GetPlayers())do
    handlePlayer(Player)
end

Players.PlayerAdded:Connect(handlePlayer)
RunService.Heartbeat:Connect(function()
    if not Flags.HitboxExpanderEnabled then
        for _, Player in pairs(Players:GetPlayers())do
            if Player ~= Client and Player.Character then
                resetCharacter(Player.Character)
            end
        end

        return
    end

    for _, Player in pairs(Players:GetPlayers())do
        if Player ~= Client and Player.Character then
            handleCharacter(Player.Character)
        end
    end
end)

Flags.KillAuraRange = 250
Flags.KillAuraWhitelist = {}
Flags.KillAuraEnabled = false
Flags.KillAuraActive = false
Flags.KillAuraVisualize = true
Flags.KillAuraSilent = true
Flags.LastHealth = {}
Flags.KillAuraTracer = Instance.new('Part')
Flags.KillAuraTracer.Size = Vector3.new(0.2, 0.2, 0.2)
Flags.KillAuraTracer.Material = Enum.Material.Neon
Flags.KillAuraTracer.Color = Color3.new(1, 1, 1)
Flags.KillAuraTracer.Transparency = 1
Flags.KillAuraTracer.Anchored = true
Flags.KillAuraTracer.CanCollide = false
Flags.KillAuraTracer.Parent = workspace

local KillAuraSection = MiscSubPage:Section({
    Name = 'Kill Aura',
    Side = 2,
})

KillAuraSection:Toggle({
    Name = 'Kill Aura',
    Flag = 'KillAuraEnabled',
    Default = false,
    Callback = function(state)
        if not state then
            Flags.KillAuraActive = false
            Flags.KillAuraTracer.Transparency = 1
        end
    end,
}):Keybind({
    Flag = 'KillAuraKeybind',
    Default = Enum.KeyCode.K,
    Mode = 'Toggle',
    Callback = function(state)
        if UserInputService:GetFocusedTextBox() then
            return
        end
        if not Flags.KillAuraEnabled then
            return
        end

        Flags.KillAuraActive = state
    end,
})
KillAuraSection:Slider({
    Name = 'Range',
    Flag = 'KillAuraRange',
    Default = 250,
    Min = 10,
    Max = 250,
    Decimals = 1,
})

local VisualToggle = KillAuraSection:Toggle({
    Name = 'Visualize',
    Flag = 'KillAuraVisualize',
    Default = true,
})

VisualToggle:Colorpicker({
    Name = 'Tracer Color',
    Flag = 'KillAuraTracerColor',
    Default = Color3.new(1, 1, 1),
    Callback = function(color)
        Flags.KillAuraTracer.Color = color
    end,
})
KillAuraSection:Toggle({
    Name = 'Silent',
    Flag = 'KillAuraSilent',
    Default = true,
})
KillAuraSection:Textbox({
    Name = 'Whitelist',
    Placeholder = 'Player name',
    Callback = function(input)
        for _, plr in pairs(Players:GetPlayers())do
            if plr.Name == input or plr.DisplayName == input then
                if Flags.KillAuraWhitelist[plr.Name] then
                    Flags.KillAuraWhitelist[plr.Name] = nil

                    CreateNotification(plr.Name .. ' removed from whitelist', 2)
                else
                    Flags.KillAuraWhitelist[plr.Name] = true

                    CreateNotification(plr.Name .. ' added to whitelist', 2)
                end

                return
            end
        end

        CreateNotification('Player not found', 2)
    end,
})
task.spawn(function()
    while true do
        if Flags.KillAuraActive and Flags.KillAuraEnabled and Client.Character and Client.Character:FindFirstChild('HumanoidRootPart') and Client.Character:FindFirstChildOfClass('Tool') then
            local root = Client.Character.HumanoidRootPart
            local closest = math.huge
            local target = nil

            for _, plr in pairs(Players:GetPlayers())do
                if plr ~= Client and not Flags.KillAuraWhitelist[plr.Name] and plr.Character and plr.Character:FindFirstChild('Head') and not plr.Character:FindFirstChild('GRABBING_CONSTRAINT') then
                    if not plr.Character:FindFirstChildOfClass('ForceField') then
                        local dist = (root.Position - plr.Character.Head.Position).Magnitude

                        if dist < closest and dist <= Flags.KillAuraRange then
                            closest = dist
                            target = plr
                        end
                    end
                end
            end

            if target then
                if Flags.KillAuraVisualize then
                    Flags.KillAuraTracer.Transparency = 0
                    Flags.KillAuraTracer.Size = Vector3.new(0.2, 0.2, (root.Position - target.Character.Head.Position).Magnitude)
                    Flags.KillAuraTracer.CFrame = CFrame.lookAt(root.Position, target.Character.Head.Position) * CFrame.new(0, 0, -Flags.KillAuraTracer.Size.Z / 2)
                else
                    Flags.KillAuraTracer.Transparency = 1
                end

                local hum = target.Character:FindFirstChild('Humanoid')

                if hum then
                    if not Flags.LastHealth[target.Name] then
                        Flags.LastHealth[target.Name] = hum.Health
                    end
                    if hum.Health < Flags.LastHealth[target.Name] then
                        playHitsound()
                    end

                    Flags.LastHealth[target.Name] = hum.Health
                end

                local predicted = getPredictedPosition(target.Character.Head)

                if Flags.KillAuraSilent then
                    game.ReplicatedStorage.MainEvent:FireServer('ShootGun', Client.Character:FindFirstChildOfClass('Tool').Handle, root.Position - Vector3.new(0, 12, 0), predicted - Vector3.new(0, 12, 0), target.Character.Head, Vector3.new(0, 0, -1))
                end
            else
                Flags.KillAuraTracer.Transparency = 1
            end
        else
            Flags.KillAuraTracer.Transparency = 1
        end

        task.wait()
    end
end)

local EspSection = VisualsPage:Section({
    Name = 'Esp',
    Side = 1,
})
local MatchaEsp = loadstring(game:HttpGet('https://pastefy.app/Lt19GiS9/raw'))()
local esp = MatchaEsp

EspSection:Toggle({
    Name = 'Box ESP',
    Flag = 'BoxESP',
    Default = false,
    Callback = function(v)
        esp.State.BoxEnabled = v
    end,
}):Colorpicker({
    Name = 'Box Color',
    Flag = 'BoxColor',
    Default = Color3.fromRGB(103, 89, 179),
    Callback = function(c)
        esp.Config.BoxColor = c

        for _, o in pairs(esp.Caches.BoxCache)do
            o.Box.Color = c
        end
    end,
})
EspSection:Toggle({
    Name = 'Box Gradient',
    Flag = 'BoxGradient',
    Default = false,
    Callback = function(v)
        esp.Config.BoxGradientEnabled = v
    end,
}):Colorpicker({
    Name = 'Gradient Color 1',
    Flag = 'BoxGrad1',
    Default = Color3.fromRGB(103, 89, 179),
    Callback = function(c)
        esp.Config.BoxGradientColor1 = c
    end,
})
EspSection:Label('Gradient Color 2'):Colorpicker({
    Name = 'Gradient Color 2',
    Flag = 'BoxGrad2',
    Default = Color3.fromRGB(204, 102, 255),
    Callback = function(c)
        esp.Config.BoxGradientColor2 = c
    end,
})
EspSection:Slider({
    Name = 'Fill Transparency',
    Flag = 'BoxFill',
    Default = 0.5,
    Min = 0,
    Max = 1,
    Decimals = 0.1,
    Callback = function(v)
        esp.Config.BoxFillTransparency = v
    end,
})
EspSection:Toggle({
    Name = 'Box Outline',
    Flag = 'BoxOutline',
    Default = true,
    Callback = function(v)
        esp.Config.BoxOutlineEnabled = v
    end,
}):Colorpicker({
    Name = 'Outline Color',
    Flag = 'BoxOutlineColor',
    Default = Color3.new(0, 0, 0),
    Callback = function(c)
        esp.Config.BoxOutlineColor = c
    end,
})
EspSection:Toggle({
    Name = 'Ring ESP',
    Flag = 'RingESP',
    Default = false,
    Callback = function(v)
        if v then
            esp:InitiateRing(Color3.new(1, 1, 1))
        else
            esp.State.RingEnabled = false
        end
    end,
}):Colorpicker({
    Name = 'Ring Color',
    Flag = 'RingColor',
    Default = Color3.new(1, 1, 1),
    Callback = function(c)
        esp.Config.RingColor = c
    end,
})
EspSection:Toggle({
    Name = 'Name ESP',
    Flag = 'NameESP',
    Default = false,
    Callback = function(v)
        esp:InitiateName(v)
    end,
})
EspSection:Toggle({
    Name = 'Distance ESP',
    Flag = 'DistanceESP',
    Default = false,
    Callback = function(v)
        esp:InitiateDistance(v)
    end,
})
EspSection:Toggle({
    Name = 'Skeleton ESP',
    Flag = 'SkeletonESP',
    Default = false,
    Callback = function(v)
        if v then
            esp:InitiateSkeleton(Color3.fromRGB(103, 89, 179))
        else
            esp.State.SkeletonEnabled = false
        end
    end,
}):Colorpicker({
    Name = 'Skeleton Color',
    Flag = 'SkeletonColor',
    Default = Color3.fromRGB(103, 89, 179),
    Callback = function(c)
        esp.Config.SkeletonColor = c
    end,
})
EspSection:Toggle({
    Name = 'Health Bar',
    Flag = 'HealthBar',
    Default = false,
    Callback = function(v)
        esp.State.HealthBarEnabled = v
    end,
})
EspSection:Toggle({
    Name = 'Health Text',
    Flag = 'HealthText',
    Default = false,
    Callback = function(v)
        esp.State.HealthTextEnabled = v
    end,
})
EspSection:Slider({
    Name = 'Health Smooth',
    Flag = 'HealthSmooth',
    Default = 0.15,
    Min = 0.05,
    Max = 0.5,
    Decimals = 0.01,
    Callback = function(v)
        esp.Config.HealthBarLerpSpeed = v
    end,
})
EspSection:Toggle({
    Name = 'Tracer ESP',
    Flag = 'TracerESP',
    Default = false,
    Callback = function(v)
        if v then
            esp:InitiateTracer(Color3.fromRGB(103, 89, 179), esp.Config.TracerOrigin)
        else
            esp.State.TracerEnabled = false
        end
    end,
}):Colorpicker({
    Name = 'Tracer Color',
    Flag = 'TracerColor',
    Default = Color3.fromRGB(103, 89, 179),
    Callback = function(c)
        esp.Config.TracerColor = c
    end,
})
EspSection:Dropdown({
    Name = 'Tracer Origin',
    Flag = 'TracerOrigin',
    Default = 'Bottom Screen',
    Items = {
        'Bottom Screen',
        'Cursor',
        'Top Screen',
    },
    Callback = function(v)
        esp.Config.TracerOrigin = v
    end,
})
EspSection:Toggle({
    Name = 'Chams',
    Flag = 'Chams',
    Default = false,
    Callback = function(v)
        if v then
            esp:InitiateChams(Color3.fromRGB(103, 89, 179))
        else
            esp.State.ChamsEnabled = false
        end
    end,
}):Colorpicker({
    Name = 'Fill Color',
    Flag = 'ChamsFill',
    Default = Color3.fromRGB(103, 89, 179),
    Callback = function(c)
        esp.Config.ChamsColor = c
    end,
})
EspSection:Label('Outline Color '):Colorpicker({
    Name = 'Outline Color',
    Flag = 'ChamsOutline',
    Default = Color3.new(1, 1, 1),
    Callback = function(c)
        esp.Config.ChamsOutlineColor = c
    end,
})
EspSection:Slider({
    Name = 'Chams Transparency',
    Flag = 'ChamsTrans',
    Default = 0.5,
    Min = 0,
    Max = 1,
    Decimals = 0.1,
    Callback = function(v)
        esp.Config.ChamsFillTransparency = v
    end,
})
EspSection:Slider({
    Name = 'ESP Distance',
    Flag = 'ESPDistance',
    Default = 1000,
    Min = 100,
    Max = 10000,
    Decimals = 1,
    Callback = function(v)
        esp:SetDistance(v)
    end,
})
esp:Initialize()

local Players = game:GetService('Players')
local player = Players.LocalPlayer

Flags.TextureEnabled = false

local faces = {
    'Front',
    'Back',
    'Bottom',
    'Top',
    'Right',
    'Left',
}
local materials = {
    {
        'Wood',
        '3258599312',
    },
    {
        'WoodPlanks',
        '8676581022',
    },
    {
        'Brick',
        '8558400252',
    },
    {
        'Cobblestone',
        '5003953441',
    },
    {
        'Concrete',
        '7341687607',
    },
    {
        'DiamondPlate',
        '6849247561',
    },
    {
        'Fabric',
        '118776397',
    },
    {
        'Granite',
        '4722586771',
    },
    {
        'Grass',
        '4722588177',
    },
    {
        'Ice',
        '3823766459',
    },
    {
        'Marble',
        '62967586',
    },
    {
        'Metal',
        '62967586',
    },
    {
        'Sand',
        '152572215',
    },
}
local originalMaterials = {}
local textureConnection

local function texture(ins, id)
    for _, v in pairs(faces)do
        local tex = Instance.new('Texture')

        tex.ZIndex = 2147483647
        tex.Texture = 'rbxassetid://' .. id
        tex.Face = Enum.NormalId[v]
        tex.Color3 = ins.Color
        tex.Transparency = ins.Transparency
        tex.Parent = ins
    end
end
local function applyTextures()
    for _, part in pairs(workspace:GetDescendants())do
        if part:IsA('BasePart') and not originalMaterials[part] then
            originalMaterials[part] = part.Material

            for _, v in pairs(materials)do
                if part.Material.Name == v[1] then
                    texture(part, v[2])

                    part.Material = Enum.Material.SmoothPlastic

                    break
                end
            end
        end
    end
end
local function revertTextures()
    for part, mat in pairs(originalMaterials)do
        if part and part.Parent then
            part.Material = mat

            for _, c in pairs(part:GetChildren())do
                if c:IsA('Texture') then
                    c:Destroy()
                end
            end
        end
    end

    originalMaterials = {}
end

local TextureSection = VisualsPage:Section({
    Name = 'Texture',
    Side = 2,
})

TextureSection:Toggle({
    Name = 'Minecraft Texture',
    Flag = 'TextureEnabled',
    Default = false,
    Callback = function(state)
        if state then
            applyTextures()

            textureConnection = workspace.DescendantAdded:Connect(function(desc)
                if desc:IsA('BasePart') then
                    originalMaterials[desc] = desc.Material

                    for _, v in pairs(materials)do
                        if desc.Material.Name == v[1] then
                            texture(desc, v[2])

                            desc.Material = Enum.Material.SmoothPlastic

                            break
                        end
                    end
                end
            end)
        else
            if textureConnection then
                textureConnection:Disconnect()

                textureConnection = nil
            end

            revertTextures()
        end
    end,
})

local AuraSection = VisualsPage:Section({
    Name = 'Self',
    Side = 2,
})

utility = utility or {}
Flags.TrailEnabled = false
Flags.TrailColor1 = Color3.fromRGB(0, 86, 255)
Flags.TrailColor2 = Color3.fromRGB(255, 0, 0)
Flags.TrailLifetime = 1.6
utility.trail_character = function(Bool)
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild('HumanoidRootPart')

    if Bool then
        if not humanoidRootPart:FindFirstChild('BlaBla') then
            local BlaBla = Instance.new('Trail', humanoidRootPart)

            BlaBla.Name = 'BlaBla'
            humanoidRootPart.Material = Enum.Material.Neon

            local attachment0 = Instance.new('Attachment', humanoidRootPart)

            attachment0.Position = Vector3.new(0, 1, 0)

            local attachment1 = Instance.new('Attachment', humanoidRootPart)

            attachment1.Position = Vector3.new(0, -1, 0)
            BlaBla.Attachment0 = attachment0
            BlaBla.Attachment1 = attachment1
            BlaBla.Color = ColorSequence.new(Flags.TrailColor1, Flags.TrailColor2)
            BlaBla.Lifetime = Flags.TrailLifetime
            BlaBla.Transparency = NumberSequence.new(0, 0)
            BlaBla.LightEmission = 0.2
            BlaBla.Brightness = 10
            BlaBla.WidthScale = NumberSequence.new{
                NumberSequenceKeypoint.new(0, 0.1),
                NumberSequenceKeypoint.new(1, 0),
            }
        end
    else
        for _, child in ipairs(humanoidRootPart:GetChildren())do
            if child:IsA('Trail') and child.Name == 'BlaBla' then
                child:Destroy()
            end
        end
    end
end

local function onCharacterAdded(character)
    if Flags.TrailEnabled then
        utility.trail_character(true)
    end
end

player.CharacterAdded:Connect(onCharacterAdded)

if player.Character then
    onCharacterAdded(player.Character)
end

AuraSection:Toggle({
    Name = 'Trail',
    Flag = 'TrailEnabled',
    Default = false,
})
AuraSection:Label('Trail Color 1'):Colorpicker({
    Flag = 'TrailColor1',
    Default = Flags.TrailColor1,
    Callback = function(Value)
        Flags.TrailColor1 = Value

        if Flags.TrailEnabled then
            utility.trail_character(false)
            utility.trail_character(true)
        end
    end,
})
AuraSection:Label('Trail Color 2'):Colorpicker({
    Flag = 'TrailColor2',
    Default = Flags.TrailColor2,
    Callback = function(Value)
        Flags.TrailColor2 = Value

        if Flags.TrailEnabled then
            utility.trail_character(false)
            utility.trail_character(true)
        end
    end,
})
AuraSection:Slider({
    Name = 'Trail Lifetime',
    Flag = 'TrailLifetime',
    Default = 1.6,
    Min = 0.1,
    Max = 5,
    Decimals = 0.1,
    Callback = function(Value)
        if Flags.TrailEnabled then
            utility.trail_character(false)
            utility.trail_character(true)
        end
    end,
})
RunService.Heartbeat:Connect(function()
    if Flags.TrailEnabled then
        Flags.TrailColor1 = Flags.TrailColor1
        Flags.TrailColor2 = Flags.TrailColor2
        Flags.TrailLifetime = Flags.TrailLifetime

        utility.trail_character(true)
    else
        utility.trail_character(false)
    end
end)
player.CharacterAdded:Connect(function()
    task.wait(1)

    if Flags.TrailEnabled then
        utility.trail_character(true)
    end
end)

Flags.LocalAuraEnabled = false
Flags.AuraType = 'Green Aura'
Flags.CustomAuraID = ''

local AuraModels = {
    ['Green Aura'] = 'rbxassetid://17423608498',
    Godly = 'rbxassetid://16699750981',
    ['Super Sayien'] = 'rbxassetid://116109508364297',
    ['North Star'] = 'rbxassetid://83945069652732',
    ['Blue Lord'] = 'rbxassetid://10974316799',
    ['North Star V2'] = 'rbxassetid://85751608071414',
    ['Pink Aura'] = 'rbxassetid://115980859615239',
    WalkStep = 'rbxassetid://95337768492206',
    ['Angel Wing'] = 'rbxassetid://90022969696073',
    ['Sweet Heart'] = 'rbxassetid://91724768175470',
    ['Ethereal Aura'] = 'rbxassetid://97041568674250',
}
local Players = game:GetService('Players')
local ReplicatedStorage = game:GetService('ReplicatedStorage')
local LocalPlayer = Players.LocalPlayer
local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local effects = {}
local isEffectEnabled = false
local model

local function loadModel(id)
    local ok, result = pcall(function()
        return game:GetObjects(id)[1]
    end)

    return ok and result
end
local function enableEffect()
    if isEffectEnabled then
        return
    end

    character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    model.Parent = ReplicatedStorage

    for _, obj in pairs(model:GetDescendants())do
        if not obj:IsA('BasePart') then
            local clone = obj:Clone()
            local parentName = obj.Parent and obj.Parent.Name
            local target = character:FindFirstChild(parentName)

            if not target then
                target = character:FindFirstChildWhichIsA('BasePart')
            end
            if target and not target:FindFirstChild(clone.Name) then
                clone.Parent = target

                table.insert(effects, clone)
            end
        end
    end

    isEffectEnabled = true
end
local function disableEffect()
    for _, v in pairs(effects)do
        if v and v.Parent then
            v:Destroy()
        end
    end

    effects = {}
    isEffectEnabled = false
end

AuraSection:Toggle({
    Name = 'Local Aura',
    Flag = 'LocalAuraEnabled',
    Default = false,
})
AuraSection:Dropdown({
    Name = 'Aura Type',
    Flag = 'AuraType',
    Default = 'Green Aura',
    Items = {
        'Green Aura',
        'Godly',
        'Super Sayien',
        'North Star',
        'Blue Lord',
        'North Star V2',
        'Pink Aura',
        'WalkStep',
        'Angel Wing',
        'Sweet Heart',
        'Ethereal Aura',
    },
})
AuraSection:Textbox({
    Name = 'Custom Aura ID',
    Flag = 'CustomAuraID',
    Placeholder = 'Enter Asset ID...',
})

local lastID = nil

RunService.Heartbeat:Connect(function()
    if Flags.LocalAuraEnabled then
        local id

        if Flags.CustomAuraID ~= '' then
            id = 'rbxassetid://' .. Flags.CustomAuraID:gsub('%D', '')
        else
            id = AuraModels[Flags.AuraType]
        end
        if id ~= lastID then
            lastID = id

            local new = loadModel(id)

            if new then
                model = new
            end
        end
        if not isEffectEnabled then
            enableEffect()
        end
    else
        if isEffectEnabled then
            disableEffect()
        end
    end
end)

local EnvtSection = VisualsPage:Section({
    Name = 'World',
    Side = 2,
})

getgenv().Skyboxes = {
    Minecraft = {
        SkyboxBk = 'rbxassetid://1876545003',
        SkyboxDn = 'rbxassetid://1876544331',
        SkyboxFt = 'rbxassetid://1876542941',
        SkyboxLf = 'rbxassetid://1876543392',
        SkyboxRt = 'rbxassetid://1876543764',
        SkyboxUp = 'rbxassetid://1876544642',
    },
    PurpleDay = {
        SkyboxBk = 'rbxassetid://296908715',
        SkyboxDn = 'rbxassetid://296908724',
        SkyboxFt = 'rbxassetid://296908740',
        SkyboxLf = 'rbxassetid://296908755',
        SkyboxRt = 'rbxassetid://296908764',
        SkyboxUp = 'rbxassetid://296908769',
    },
    RedNight = {
        SkyboxBk = 'rbxassetid://401664839',
        SkyboxDn = 'rbxassetid://401664862',
        SkyboxFt = 'rbxassetid://401664960',
        SkyboxLf = 'rbxassetid://401664881',
        SkyboxRt = 'rbxassetid://401664901',
        SkyboxUp = 'rbxassetid://401664936',
    },
    Trollge = {
        SkyboxBk = 'rbxassetid://6155393905',
        SkyboxDn = 'rbxassetid://6155393905',
        SkyboxFt = 'rbxassetid://6155393905',
        SkyboxLf = 'rbxassetid://6155393905',
        SkyboxRt = 'rbxassetid://6155393905',
        SkyboxUp = 'rbxassetid://6155393905',
    },
    Night = {
        SkyboxBk = 'rbxassetid://48020371',
        SkyboxDn = 'rbxassetid://48020144',
        SkyboxFt = 'rbxassetid://48020234',
        SkyboxLf = 'rbxassetid://48020211',
        SkyboxRt = 'rbxassetid://48020254',
        SkyboxUp = 'rbxassetid://48020383',
    },
    Space = {
        SkyboxBk = 'rbxassetid://149397692',
        SkyboxDn = 'rbxassetid://149397686',
        SkyboxFt = 'rbxassetid://149397697',
        SkyboxLf = 'rbxassetid://149397684',
        SkyboxRt = 'rbxassetid://149397688',
        SkyboxUp = 'rbxassetid://149397702',
    },
    Default = {
        SkyboxBk = 'rbxassetid://6444884337',
        SkyboxDn = 'rbxassetid://6444884785',
        SkyboxFt = 'rbxassetid://6444884337',
        SkyboxLf = 'rbxassetid://6444884337',
        SkyboxRt = 'rbxassetid://6444884337',
        SkyboxUp = 'rbxassetid://6412503613',
    },
    VibeMorning = {
        SkyboxBk = 'rbxassetid://1417494030',
        SkyboxDn = 'rbxassetid://1417494146',
        SkyboxFt = 'rbxassetid://1417494253',
        SkyboxLf = 'rbxassetid://1417494402',
        SkyboxRt = 'rbxassetid://1417494499',
        SkyboxUp = 'rbxassetid://1417494643',
    },
    VibeNight = {
        SkyboxBk = 'rbxassetid://5084575798',
        SkyboxDn = 'rbxassetid://5084575916',
        SkyboxFt = 'rbxassetid://5103949679',
        SkyboxLf = 'rbxassetid://5103948542',
        SkyboxRt = 'rbxassetid://5103948784',
        SkyboxUp = 'rbxassetid://5084576400',
    },
    PurpleSplash = {
        SkyboxBk = 'rbxassetid://8539982183',
        SkyboxDn = 'rbxassetid://8539981943',
        SkyboxFt = 'rbxassetid://8539981721',
        SkyboxLf = 'rbxassetid://8539981424',
        SkyboxRt = 'rbxassetid://8539980766',
        SkyboxUp = 'rbxassetid://8539981085',
    },
    GreenSpace = {
        SkyboxBk = 'rbxassetid://159248188',
        SkyboxDn = 'rbxassetid://159248183',
        SkyboxFt = 'rbxassetid://159248187',
        SkyboxLf = 'rbxassetid://159248173',
        SkyboxRt = 'rbxassetid://159248192',
        SkyboxUp = 'rbxassetid://159248176',
    },
    Snowy = {
        SkyboxBk = 'rbxassetid://155657655',
        SkyboxDn = 'rbxassetid://155674246',
        SkyboxFt = 'rbxassetid://155657609',
        SkyboxLf = 'rbxassetid://155657671',
        SkyboxRt = 'rbxassetid://155657619',
        SkyboxUp = 'rbxassetid://155674931',
    },
    Spongebob = {
        SkyboxBk = 'rbxassetid://10287764626',
        SkyboxDn = 'rbxassetid://10287766382',
        SkyboxFt = 'rbxassetid://10287764626',
        SkyboxLf = 'rbxassetid://10287763421',
        SkyboxRt = 'rbxassetid://10287764626',
        SkyboxUp = 'rbxassetid://10287767597',
    },
    PinkDay = {
        SkyboxBk = 'rbxassetid://271042516',
        SkyboxDn = 'rbxassetid://271077243',
        SkyboxFt = 'rbxassetid://271042556',
        SkyboxLf = 'rbxassetid://271042310',
        SkyboxRt = 'rbxassetid://271042467',
        SkyboxUp = 'rbxassetid://271077958',
    },
    AlienRed = {
        SkyboxBk = 'rbxassetid://1012890',
        SkyboxDn = 'rbxassetid://1012891',
        SkyboxFt = 'rbxassetid://1012887',
        SkyboxLf = 'rbxassetid://1012889',
        SkyboxRt = 'rbxassetid://1012888',
        SkyboxUp = 'rbxassetid://1014449',
    },
    WallsOfAutumn = {
        SkyboxBk = 'rbxassetid://7123244709',
        SkyboxDn = 'rbxassetid://7123246497',
        SkyboxFt = 'rbxassetid://7123255895',
        SkyboxLf = 'rbxassetid://7123257992',
        SkyboxRt = 'rbxassetid://7123279103',
        SkyboxUp = 'rbxassetid://7123281828',
    },
    ColdWinterness = {
        SkyboxBk = 'rbxassetid://7123754562',
        SkyboxDn = 'rbxassetid://7123756028',
        SkyboxFt = 'rbxassetid://7123757422',
        SkyboxLf = 'rbxassetid://7123758897',
        SkyboxRt = 'rbxassetid://7123760563',
        SkyboxUp = 'rbxassetid://7123762364',
    },
    Oblivion = {
        SkyboxBk = 'rbxassetid://7123654189',
        SkyboxDn = 'rbxassetid://7123657455',
        SkyboxFt = 'rbxassetid://7123662047',
        SkyboxLf = 'rbxassetid://7123664533',
        SkyboxRt = 'rbxassetid://7123666598',
        SkyboxUp = 'rbxassetid://7123668994',
    },
    ClassicSky = {
        SkyboxBk = 'rbxassetid://672345740',
        SkyboxDn = 'rbxassetid://672345828',
        SkyboxFt = 'rbxassetid://672345879',
        SkyboxLf = 'rbxassetid://672345927',
        SkyboxRt = 'rbxassetid://672346006',
        SkyboxUp = 'rbxassetid://672346072',
    },
    PurpleNight = {
        SkyboxBk = 'rbxassetid://5084575798',
        SkyboxDn = 'rbxassetid://5084575916',
        SkyboxFt = 'rbxassetid://5103949679',
        SkyboxLf = 'rbxassetid://5103948542',
        SkyboxRt = 'rbxassetid://5103948784',
        SkyboxUp = 'rbxassetid://5084576400',
    },
    PurpleDayClear = {
        SkyboxBk = 'rbxassetid://6847607535',
        SkyboxDn = 'rbxassetid://6847607977',
        SkyboxFt = 'rbxassetid://6847608302',
        SkyboxLf = 'rbxassetid://6847608608',
        SkyboxRt = 'rbxassetid://6847608986',
        SkyboxUp = 'rbxassetid://6847609323',
    },
    YellowDay = {
        SkyboxBk = 'rbxassetid://2651432901',
        SkyboxDn = 'rbxassetid://2651434974',
        SkyboxFt = 'rbxassetid://2651435990',
        SkyboxLf = 'rbxassetid://2651436494',
        SkyboxRt = 'rbxassetid://2651436979',
        SkyboxUp = 'rbxassetid://2651437350',
    },
    MinecraftSky = {
        SkyboxBk = 'rbxassetid://8735166756',
        SkyboxDn = 'rbxassetid://8735166707',
        SkyboxFt = 'rbxassetid://8735231668',
        SkyboxLf = 'rbxassetid://8735166755',
        SkyboxRt = 'rbxassetid://8735166751',
        SkyboxUp = 'rbxassetid://8735166729',
    },
    Sunset = {
        SkyboxBk = 'rbxassetid://150939022',
        SkyboxDn = 'rbxassetid://150939038',
        SkyboxFt = 'rbxassetid://150939047',
        SkyboxLf = 'rbxassetid://150939056',
        SkyboxRt = 'rbxassetid://150939063',
        SkyboxUp = 'rbxassetid://150939082',
    },
    CartoonSky = {
        SkyboxBk = 'rbxassetid://6778646360',
        SkyboxDn = 'rbxassetid://6778658683',
        SkyboxFt = 'rbxassetid://6778648039',
        SkyboxLf = 'rbxassetid://6778649136',
        SkyboxRt = 'rbxassetid://6778650519',
        SkyboxUp = 'rbxassetid://6778658364',
    },
    Anime = {
        SkyboxBk = 'rbxassetid://7643700666',
        SkyboxDn = 'rbxassetid://7643743687',
        SkyboxFt = 'rbxassetid://7644304186',
        SkyboxLf = 'rbxassetid://7644288724',
        SkyboxRt = 'rbxassetid://7643700819',
        SkyboxUp = 'rbxassetid://7643757404',
    },
    HellSky = {
        SkyboxBk = 'rbxassetid://437430787',
        SkyboxDn = 'rbxassetid://437430804',
        SkyboxFt = 'rbxassetid://437430543',
        SkyboxLf = 'rbxassetid://437430732',
        SkyboxRt = 'rbxassetid://437430747',
        SkyboxUp = 'rbxassetid://437430771',
    },
    StarryNight = {
        SkyboxBk = 'rbxassetid://8291078911',
        SkyboxDn = 'rbxassetid://8291077403',
        SkyboxFt = 'rbxassetid://8291081613',
        SkyboxLf = 'rbxassetid://8291074004',
        SkyboxRt = 'rbxassetid://8291080353',
        SkyboxUp = 'rbxassetid://8291075054',
    },
    Omori = {
        SkyboxBk = 'rbxassetid://8767416629',
        SkyboxDn = 'rbxassetid://8767416629',
        SkyboxFt = 'rbxassetid://8767416629',
        SkyboxLf = 'rbxassetid://8767416629',
        SkyboxRt = 'rbxassetid://8767416629',
        SkyboxUp = 'rbxassetid://8767416629',
    },
    c00lkidd = {
        SkyboxBk = 'rbxassetid://433381097',
        SkyboxDn = 'rbxassetid://433381097',
        SkyboxFt = 'rbxassetid://433381097',
        SkyboxLf = 'rbxassetid://433381097',
        SkyboxRt = 'rbxassetid://433381097',
        SkyboxUp = 'rbxassetid://433381097',
    },
    ClearDay = {
        SkyboxBk = 'rbxassetid://591058823',
        SkyboxDn = 'rbxassetid://591059876',
        SkyboxFt = 'rbxassetid://591058104',
        SkyboxLf = 'rbxassetid://591057861',
        SkyboxRt = 'rbxassetid://591057625',
        SkyboxUp = 'rbxassetid://591059642',
    },
    Mountains = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=324014980',
        SkyboxDn = 'http://www.roblox.com/asset/?id=324015477',
        SkyboxFt = 'http://www.roblox.com/asset/?id=324014995',
        SkyboxLf = 'http://www.roblox.com/asset/?id=324014679',
        SkyboxRt = 'http://www.roblox.com/asset/?id=324015013',
        SkyboxUp = 'http://www.roblox.com/asset/?id=324015409',
    },
    Forest = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=70945545',
        SkyboxDn = 'http://www.roblox.com/asset/?id=70945449',
        SkyboxFt = 'http://www.roblox.com/asset/?id=70945487',
        SkyboxLf = 'http://www.roblox.com/asset/?id=70945523',
        SkyboxRt = 'http://www.roblox.com/asset/?id=70945508',
        SkyboxUp = 'http://www.roblox.com/asset/?id=70945531',
    },
    LargeForest = {
        SkyboxBk = 'rbxassetid://17428978603',
        SkyboxDn = 'rbxassetid://17428977445',
        SkyboxFt = 'rbxassetid://17428977114',
        SkyboxLf = 'rbxassetid://17428978399',
        SkyboxRt = 'rbxassetid://17428976828',
        SkyboxUp = 'rbxassetid://17428976669',
    },
    Crimson = {
        SkyboxBk = 'rbxassetid://15832429892',
        SkyboxDn = 'rbxassetid://15832430998',
        SkyboxFt = 'rbxassetid://15832430210',
        SkyboxLf = 'rbxassetid://15832430671',
        SkyboxRt = 'rbxassetid://15832431198',
        SkyboxUp = 'rbxassetid://15832429401',
    },
    PumpkinHill = {
        SkyboxBk = 'rbxassetid://11202510597',
        SkyboxDn = 'rbxassetid://11202510255',
        SkyboxFt = 'rbxassetid://11202509993',
        SkyboxLf = 'rbxassetid://11202510806',
        SkyboxRt = 'rbxassetid://11202511066',
        SkyboxUp = 'rbxassetid://11202509704',
    },
    AnimeIsland = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=14753804949',
        SkyboxDn = 'http://www.roblox.com/asset/?id=14753795573',
        SkyboxFt = 'http://www.roblox.com/asset/?id=14753807625',
        SkyboxLf = 'http://www.roblox.com/asset/?id=14753797417',
        SkyboxRt = 'http://www.roblox.com/asset/?id=14753799966',
        SkyboxUp = 'http://www.roblox.com/asset/?id=14753810287',
    },
    SnowyMountains = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=368385273',
        SkyboxDn = 'http://www.roblox.com/asset/?id=48015300',
        SkyboxFt = 'http://www.roblox.com/asset/?id=368388290',
        SkyboxLf = 'http://www.roblox.com/asset/?id=368390615',
        SkyboxRt = 'http://www.roblox.com/asset/?id=368385190',
        SkyboxUp = 'http://www.roblox.com/asset/?id=48015387',
    },
    Desert = {
        SkyboxBk = 'rbxassetid://161319957',
        SkyboxDn = 'rbxassetid://161319965',
        SkyboxFt = 'rbxassetid://161319970',
        SkyboxLf = 'rbxassetid://161319983',
        SkyboxRt = 'rbxassetid://161319989',
        SkyboxUp = 'rbxassetid://161319996',
    },
    Cloudy = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=225469345',
        SkyboxDn = 'http://www.roblox.com/asset/?id=225469349',
        SkyboxFt = 'http://www.roblox.com/asset/?id=225469359',
        SkyboxLf = 'http://www.roblox.com/asset/?id=225469364',
        SkyboxRt = 'http://www.roblox.com/asset/?id=225469372',
        SkyboxUp = 'http://www.roblox.com/asset/?id=225469380',
    },
    Island = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=319343577',
        SkyboxDn = 'http://www.roblox.com/asset/?id=319343653',
        SkyboxFt = 'http://www.roblox.com/asset/?id=319343666',
        SkyboxLf = 'http://www.roblox.com/asset/?id=319343686',
        SkyboxRt = 'http://www.roblox.com/asset/?id=319343631',
        SkyboxUp = 'http://www.roblox.com/asset/?id=319343614',
    },
    OrangeFog = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=458016711',
        SkyboxDn = 'http://www.roblox.com/asset/?id=458016826',
        SkyboxFt = 'http://www.roblox.com/asset/?id=458016532',
        SkyboxLf = 'http://www.roblox.com/asset/?id=458016655',
        SkyboxRt = 'http://www.roblox.com/asset/?id=458016782',
        SkyboxUp = 'http://www.roblox.com/asset/?id=458016792',
    },
    FadeNight = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=16888843486',
        SkyboxDn = 'http://www.roblox.com/asset/?id=16888845693',
        SkyboxFt = 'http://www.roblox.com/asset/?id=16888848245',
        SkyboxLf = 'http://www.roblox.com/asset/?id=16888850949',
        SkyboxRt = 'http://www.roblox.com/asset/?id=16888854243',
        SkyboxUp = 'http://www.roblox.com/asset/?id=16888857144',
    },
    Office = {
        SkyboxBk = 'rbxassetid://658623433',
        SkyboxDn = 'rbxassetid://316342560',
        SkyboxFt = 'rbxassetid://658625205',
        SkyboxLf = 'rbxassetid://658627155',
        SkyboxRt = 'rbxassetid://658628504',
        SkyboxUp = 'rbxassetid://658632701',
    },
    Spongebob2 = {
        SkyboxBk = 'rbxassetid://12049872454',
        SkyboxDn = 'rbxassetid://12049872284',
        SkyboxFt = 'rbxassetid://12049872181',
        SkyboxLf = 'rbxassetid://12049872074',
        SkyboxRt = 'rbxassetid://12049871884',
        SkyboxUp = 'rbxassetid://12049871774',
    },
    PurpleFog = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=17279854976',
        SkyboxDn = 'http://www.roblox.com/asset/?id=17279856318',
        SkyboxFt = 'http://www.roblox.com/asset/?id=17279858447',
        SkyboxLf = 'http://www.roblox.com/asset/?id=17279860360',
        SkyboxRt = 'http://www.roblox.com/asset/?id=17279862234',
        SkyboxUp = 'http://www.roblox.com/asset/?id=17279864507',
    },
    EarthSpace = {
        SkyboxBk = 'rbxassetid://15753305495',
        SkyboxDn = 'rbxassetid://15753362674',
        SkyboxFt = 'rbxassetid://15753305823',
        SkyboxLf = 'rbxassetid://15753310707',
        SkyboxRt = 'rbxassetid://15753304774',
        SkyboxUp = 'rbxassetid://15753304473',
    },
    GreenCloudy = {
        SkyboxBk = 'rbxassetid://921882045',
        SkyboxDn = 'rbxassetid://921881907',
        SkyboxFt = 'rbxassetid://921882121',
        SkyboxLf = 'rbxassetid://921881811',
        SkyboxRt = 'rbxassetid://921881989',
        SkyboxUp = 'rbxassetid://921882259',
    },
    SummerDay = {
        SkyboxBk = 'http://www.roblox.com/asset/?version=1&id=135483466',
        SkyboxDn = 'http://www.roblox.com/asset/?version=1&id=135483484',
        SkyboxFt = 'http://www.roblox.com/asset/?version=1&id=135483461',
        SkyboxLf = 'http://www.roblox.com/asset/?version=1&id=135483495',
        SkyboxRt = 'http://www.roblox.com/asset/?version=1&id=135483499',
        SkyboxUp = 'http://www.roblox.com/asset/?version=1&id=135483475',
    },
    SnowyPlains = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=155657655',
        SkyboxDn = 'http://www.roblox.com/asset/?id=155674246',
        SkyboxFt = 'http://www.roblox.com/asset/?id=155657609',
        SkyboxLf = 'http://www.roblox.com/asset/?id=155657671',
        SkyboxRt = 'http://www.roblox.com/asset/?id=155657619',
        SkyboxUp = 'http://www.roblox.com/asset/?id=155674931',
    },
    Underwater = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=227635868',
        SkyboxDn = 'http://www.roblox.com/asset/?id=227635921',
        SkyboxFt = 'http://www.roblox.com/asset/?id=227635954',
        SkyboxLf = 'http://www.roblox.com/asset/?id=227635974',
        SkyboxRt = 'http://www.roblox.com/asset/?id=227635990',
        SkyboxUp = 'http://www.roblox.com/asset/?id=227636031',
    },
    BlueAbyss = {
        SkyboxBk = 'rbxassetid://16269815885',
        SkyboxDn = 'rbxassetid://16269839652',
        SkyboxFt = 'rbxassetid://16269798011',
        SkyboxLf = 'rbxassetid://16269813852',
        SkyboxRt = 'rbxassetid://16269814948',
        SkyboxUp = 'rbxassetid://16269829700',
    },
    Poison = {
        SkyboxBk = 'rbxassetid://1370716695',
        SkyboxDn = 'rbxassetid://1370716766',
        SkyboxFt = 'rbxassetid://1370716833',
        SkyboxLf = 'rbxassetid://1370716898',
        SkyboxRt = 'rbxassetid://1370716955',
        SkyboxUp = 'rbxassetid://1370717024',
    },
    BlueSpace = {
        SkyboxBk = 'rbxassetid://1127563035',
        SkyboxDn = 'rbxassetid://1127563006',
        SkyboxFt = 'rbxassetid://1127563026',
        SkyboxLf = 'rbxassetid://1127563216',
        SkyboxRt = 'rbxassetid://1127563115',
        SkyboxUp = 'rbxassetid://1127562999',
    },
    AnimeMountains = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=12849370744',
        SkyboxDn = 'http://www.roblox.com/asset/?id=12849378890',
        SkyboxFt = 'http://www.roblox.com/asset/?id=12849390276',
        SkyboxLf = 'http://www.roblox.com/asset/?id=12849405549',
        SkyboxRt = 'http://www.roblox.com/asset/?id=12849398428',
        SkyboxUp = 'http://www.roblox.com/asset/?id=12849426002',
    },
    PinkGradient = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=5371541816',
        SkyboxDn = 'http://www.roblox.com/asset/?id=5371541154',
        SkyboxFt = 'http://www.roblox.com/asset/?id=5371541816',
        SkyboxLf = 'http://www.roblox.com/asset/?id=5371541816',
        SkyboxRt = 'http://www.roblox.com/asset/?id=5371541816',
        SkyboxUp = 'http://www.roblox.com/asset/?id=5371540604',
    },
    YellowGradient = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=159005370',
        SkyboxDn = 'rbxassetid://858422412',
        SkyboxFt = 'http://www.roblox.com/asset/?id=159005370',
        SkyboxLf = 'http://www.roblox.com/asset/?id=159005370',
        SkyboxRt = 'http://www.roblox.com/asset/?id=159005370',
        SkyboxUp = 'http://www.roblox.com/asset/?id=159006363',
    },
    BlueGradient = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=4628466090',
        SkyboxDn = 'http://www.roblox.com/asset/?id=4628471901',
        SkyboxFt = 'http://www.roblox.com/asset/?id=4628466090',
        SkyboxLf = 'http://www.roblox.com/asset/?id=4628466090',
        SkyboxRt = 'http://www.roblox.com/asset/?id=4628466090',
        SkyboxUp = 'http://www.roblox.com/asset/?id=4628472152',
    },
    GreenNebula = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=47974894',
        SkyboxDn = 'http://www.roblox.com/asset/?id=47974690',
        SkyboxFt = 'http://www.roblox.com/asset/?id=47974821',
        SkyboxLf = 'http://www.roblox.com/asset/?id=47974776',
        SkyboxRt = 'http://www.roblox.com/asset/?id=47974859',
        SkyboxUp = 'http://www.roblox.com/asset/?id=47974909',
    },
    OrangeGradient = {
        SkyboxBk = 'rbxassetid://6902754982',
        SkyboxDn = 'rbxassetid://6902795826',
        SkyboxFt = 'rbxassetid://6902754982',
        SkyboxLf = 'rbxassetid://6902754982',
        SkyboxRt = 'rbxassetid://6902754982',
        SkyboxUp = 'rbxassetid://6902796078',
    },
    GreenAurora = {
        SkyboxBk = 'http://www.roblox.com/asset/?id=16563478983',
        SkyboxDn = 'http://www.roblox.com/asset/?id=16563481302',
        SkyboxFt = 'http://www.roblox.com/asset/?id=16563484084',
        SkyboxLf = 'http://www.roblox.com/asset/?id=16563485362',
        SkyboxRt = 'http://www.roblox.com/asset/?id=16563487078',
        SkyboxUp = 'http://www.roblox.com/asset/?id=16563489821',
    },
}

local skyboxNames = {}

for k in pairs(getgenv().Skyboxes)do
    table.insert(skyboxNames, k)
end

table.sort(skyboxNames)

Flags.selectedSkybox = 'Default'
Flags.customSkyboxEnabled = false

local originalSkyProperties = {}
local lighting = game:GetService('Lighting')

if lighting:FindFirstChild('Sky') then
    local sky = lighting.Sky

    originalSkyProperties = {
        SkyboxBk = sky.SkyboxBk,
        SkyboxDn = sky.SkyboxDn,
        SkyboxFt = sky.SkyboxFt,
        SkyboxLf = sky.SkyboxLf,
        SkyboxRt = sky.SkyboxRt,
        SkyboxUp = sky.SkyboxUp,
    }
end

local function applySkybox(name)
    if not getgenv().Skyboxes[name] then
        return
    end

    local sb = getgenv().Skyboxes[name]
    local sky = lighting:FindFirstChild('Sky') or Instance.new('Sky', lighting)

    sky.SkyboxBk = sb.SkyboxBk
    sky.SkyboxDn = sb.SkyboxDn
    sky.SkyboxFt = sb.SkyboxFt
    sky.SkyboxLf = sb.SkyboxLf
    sky.SkyboxRt = sb.SkyboxRt
    sky.SkyboxUp = sb.SkyboxUp
end
local function restoreOriginalSky()
    local sky = lighting:FindFirstChild('Sky')

    if sky and next(originalSkyProperties) ~= nil then
        sky.SkyboxBk = originalSkyProperties.SkyboxBk
        sky.SkyboxDn = originalSkyProperties.SkyboxDn
        sky.SkyboxFt = originalSkyProperties.SkyboxFt
        sky.SkyboxLf = originalSkyProperties.SkyboxLf
        sky.SkyboxRt = originalSkyProperties.SkyboxRt
        sky.SkyboxUp = originalSkyProperties.SkyboxUp
    end
end

EnvtSection:Searchbox({
    Name = 'Select Skybox',
    Flag = 'selectedSkybox',
    Items = skyboxNames,
    Multi = false,
    Callback = function(Value)
        if Flags.customSkyboxEnabled then
            applySkybox(Value)
        end
    end,
})
EnvtSection:Toggle({
    Name = 'Custom Skybox',
    Flag = 'customSkyboxEnabled',
    Default = false,
    Callback = function(Value)
        if Value then
            applySkybox(Flags.selectedSkybox)
        else
            restoreOriginalSky()
        end
    end,
})

local skyboxLoop = RunService.Heartbeat:Connect(function()
    if Flags.customSkyboxEnabled then
        applySkybox(Flags.selectedSkybox)
    end
end)

EnvtSection:Toggle({
    Name = 'No Fog',
    Flag = 'NoFog',
    Default = false,
    Callback = function(Value)
        local lighting = game:GetService('Lighting')

        if Value then
            if not _G.FogRemovalExecuted then
                _G.OriginalFogSettings = {
                    FogEnd = lighting.FogEnd,
                    FogStart = lighting.FogStart,
                }
                lighting.FogEnd = 100000
                lighting.FogStart = 0

                local atmosphere = lighting:FindFirstChildOfClass('Atmosphere')

                if atmosphere then
                    atmosphere:Destroy()
                end

                _G.FogRemovalExecuted = true
            end
        else
            if _G.FogRemovalExecuted then
                lighting.FogEnd = _G.OriginalFogSettings.FogEnd
                lighting.FogStart = _G.OriginalFogSettings.FogStart
                _G.FogRemovalExecuted = false
            end
        end
    end,
})

local Lighting = game:GetService('Lighting')

Flags.DefaultFogStart = Lighting.FogStart
Flags.DefaultFogEnd = Lighting.FogEnd
Flags.DefaultFogColor = Lighting.FogColor
Flags.DefaultAmbient = Lighting.Ambient
Flags.DefaultTechnology = Lighting.Technology.Name
Flags.TimeEnabled = false
Flags.TimeValue = 12
Flags.FullBright = false
Flags.DefaultBrightness = Lighting.Brightness
Flags.DefaultClockTime = Lighting.ClockTime
Flags.DefaultOutdoorAmbient = Lighting.OutdoorAmbient
Flags.DefaultExposure = Lighting.ExposureCompensation
Flags.DefaultShadow = Lighting.GlobalShadows
Flags.FogEnabled = false
Flags.FogStart = Lighting.FogStart
Flags.FogEnd = Lighting.FogEnd
Flags.FogColor = Lighting.FogColor
Flags.AmbientEnabled = false
Flags.AmbientColor = Lighting.Ambient
Flags.LightingTech = Lighting.Technology.Name

EnvtSection:Toggle({
    Name = 'Time Of Day',
    Flag = 'TimeEnabled',
    Default = false,
})
EnvtSection:Slider({
    Name = 'Time Value',
    Flag = 'TimeValue',
    Default = 12,
    Min = 0,
    Max = 24,
    Decimals = 1,
})
EnvtSection:Toggle({
    Name = 'Full Bright',
    Flag = 'FullBright',
    Default = false,
})
RunService.Heartbeat:Connect(function()
    if Flags.TimeEnabled then
        Lighting.ClockTime = Flags.TimeValue
    end
    if Flags.FullBright then
        Lighting.Brightness = 3
        Lighting.GlobalShadows = false
        Lighting.OutdoorAmbient = Color3.new(1, 1, 1)
        Lighting.ExposureCompensation = 0.3
    else
        Lighting.Brightness = Flags.DefaultBrightness
        Lighting.GlobalShadows = Flags.DefaultShadow
        Lighting.OutdoorAmbient = Flags.DefaultOutdoorAmbient
        Lighting.ExposureCompensation = Flags.DefaultExposure
    end
end)
EnvtSection:Toggle({
    Name = 'Fog Changer',
    Flag = 'FogEnabled',
    Default = false,
}):Colorpicker({
    Flag = 'FogColorr',
    Default = Flags.DefaultFogColor,
    Callback = function(Value)
        Flags.FogColor = Value
    end,
})
EnvtSection:Slider({
    Name = 'Fog Start',
    Flag = 'FogStart',
    Default = Flags.DefaultFogStart,
    Min = 0,
    Max = 1000,
    Decimals = 1,
})
EnvtSection:Slider({
    Name = 'Fog End',
    Flag = 'FogEnd',
    Default = Flags.DefaultFogEnd,
    Min = 10,
    Max = 10000,
    Decimals = 1,
})
EnvtSection:Toggle({
    Name = 'Ambient',
    Flag = 'AmbientEnabled',
    Default = false,
}):Colorpicker({
    Flag = 'AmbientColorr',
    Default = Flags.DefaultAmbient,
    Callback = function(Value)
        Flags.AmbientColor = Value
    end,
})
EnvtSection:Dropdown({
    Name = 'Lighting Technology',
    Flag = 'LightingTech',
    Items = {
        'Voxel',
        'Compatibility',
        'ShadowMap',
        'Future',
    },
    Default = Flags.DefaultTechnology,
})
RunService.Heartbeat:Connect(function()
    if Flags.FogEnabled then
        Lighting.FogStart = Flags.FogStart
        Lighting.FogEnd = Flags.FogEnd
        Lighting.FogColor = Flags.FogColor
    else
        Lighting.FogStart = Flags.DefaultFogStart
        Lighting.FogEnd = Flags.DefaultFogEnd
        Lighting.FogColor = Flags.DefaultFogColor
    end
    if Flags.AmbientEnabled then
        Lighting.Ambient = Flags.AmbientColor
    else
        Lighting.Ambient = Flags.DefaultAmbient
    end

    Lighting.Technology = Enum.Technology[Flags.LightingTech]
end)

local MovementSection = CharacterPage:Section({
    Name = 'Movement',
    Side = 1,
})

Flags.WalkSpeedEnabled = false
Flags.JumpEnabled = false
Flags.CFrameEnabled = false
Flags.WalkKey = false
Flags.CFrameKey = false
Flags.WalkSpeed = 16
Flags.JumpPower = 50
Flags.CFrameSpeed = 10

MovementSection:Toggle({
    Name = 'CFrame Speed',
    Flag = 'CFrameEnabled',
    Callback = function(state)
        if not state then
            Flags.CFrameKey = false
        end
    end,
}):Keybind({
    Flag = 'CFrameKeyy',
    Default = Enum.KeyCode.T,
    Mode = 'Toggle',
    Callback = function(state)
        if Flags.CFrameEnabled then
            Flags.CFrameKey = state
        end
    end,
})
MovementSection:Toggle({
    Name = 'WalkSpeed',
    Flag = 'WalkSpeedEnabled',
    Callback = function(state)
        if not state then
            Flags.WalkKey = false
        end
    end,
}):Keybind({
    Flag = 'WalkKeyy',
    Default = Enum.KeyCode.T,
    Mode = 'Toggle',
    Callback = function(state)
        if game:GetService('UserInputService'):GetFocusedTextBox() then
            return
        end
        if Flags.WalkSpeedEnabled then
            Flags.WalkKey = state
        end
    end,
})
MovementSection:Slider({
    Name = 'Walk Speed',
    Flag = 'WalkSpeed',
    Default = 16,
    Min = 16,
    Max = 500,
})
MovementSection:Slider({
    Name = 'Jump Power',
    Flag = 'JumpPower',
    Default = 50,
    Min = 50,
    Max = 500,
})
MovementSection:Slider({
    Name = 'CFrame Speed',
    Flag = 'CFrameSpeed',
    Default = 10,
    Min = 1,
    Max = 200,
})
RunService.RenderStepped:Connect(function()
    local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild('Humanoid')

    if not hum then
        return
    end
    if Flags.WalkSpeedEnabled and Flags.WalkKey then
        hum.WalkSpeed = Flags.WalkSpeed
        hum.JumpPower = Flags.JumpPower
    end
end)
task.spawn(function()
    while true do
        task.wait()

        local char = LocalPlayer.Character
        local hum = char and char:FindFirstChild('Humanoid')

        if Flags.CFrameEnabled and Flags.CFrameKey and hum and hum.MoveDirection.Magnitude > 0 then
            char:TranslateBy(hum.MoveDirection * Flags.CFrameSpeed * 0.1)
        end
    end
end)

local EmoteSection = CharacterPage:Section({
    Name = 'Emotes',
    Side = 2,
})

Flags.EmoteEnabled = false
Flags.EmoteSpeed = 1
Flags.RandomEmote = false
Flags.CurrentEmote = 'Floss'

local Emotes = {
    Floss = 'rbxassetid://10714340543',
    ['billy bounce'] = 'rbxassetid://136095999219650',
    ['zero two dance v2'] = 'rbxassetid://116714406076290',
    ['jabba switchway'] = 'rbxassetid://82682811348660',
    beat = 'rbxassetid://133394554631338',
    ['coffin walkout'] = 'rbxassetid://126771729094882',
    ['take the l'] = 'rbxassetid://117865821073911',
    Popular = 'rbxassetid://93062298566806',
    ['hip sway'] = 'rbxassetid://138316142522795',
    ['cute feet kicking'] = 'rbxassetid://124287251935400',
}
local Players = game:GetService('Players')
local lp = Players.LocalPlayer
local anim = Instance.new('Animation')
local track = nil
local loadedEmote = nil

local function LoadAnim()
    local char = lp.Character

    if not char then
        return
    end

    local hum = char:FindFirstChildOfClass('Humanoid')

    if not hum then
        return
    end
    if track then
        track:Stop()

        track = nil
    end

    anim.AnimationId = Emotes[Flags.CurrentEmote]
    track = hum:LoadAnimation(anim)
    track.Looped = true
    track.Priority = Enum.AnimationPriority.Action
    loadedEmote = Flags.CurrentEmote
end
local function Play()
    if not track or loadedEmote ~= Flags.CurrentEmote then
        LoadAnim()
    end
    if track then
        track:Play()
        track:AdjustSpeed(Flags.EmoteSpeed)
    end
end
local function Stopemote()
    if track then
        track:Stop()
    end
end

lp.CharacterAdded:Connect(function()
    task.wait(1)
    LoadAnim()

    if Flags.EmoteEnabled then
        Play()
    end
end)
task.spawn(function()
    while true do
        task.wait(0.1)

        if Flags.RandomEmote then
            task.wait(math.random(4, 7))

            local keys = {}

            for k in pairs(Emotes)do
                table.insert(keys, k)
            end

            Flags.CurrentEmote = keys[math.random(#keys)]

            Play()
        end
    end
end)
game:GetService('RunService').Heartbeat:Connect(function()
    if Flags.EmoteEnabled and track and not track.IsPlaying then
        Play()
    end
end)
EmoteSection:Toggle({
    Name = 'Play Emote',
    Flag = 'EmoteEnabled',
    Callback = function(Value)
        if Value then
            if lp.Character then
                Play()
            end
        else
            Stopemote()
        end
    end,
})
EmoteSection:Slider({
    Name = 'Speed',
    Flag = 'EmoteSpeed',
    Default = 1,
    Min = 0.1,
    Max = 3,
    Callback = function(Value)
        if track then
            track:AdjustSpeed(Value)
        end
    end,
})
EmoteSection:Toggle({
    Name = 'Random Emote',
    Flag = 'RandomEmote',
    Callback = function(Value)
        if Value and Flags.EmoteEnabled then
            local keys = {}

            for k in pairs(Emotes)do
                table.insert(keys, k)
            end

            Flags.CurrentEmote = keys[math.random(#keys)]

            Play()
        end
    end,
})
EmoteSection:Searchbox({
    Name = 'Emote Select',
    Flag = 'CurrentEmote',
    Default = 'Floss',
    Items = {
        'Floss',
        'billy bounce',
        'zero two dance v2',
        'jabba switchway',
        'beat',
        'coffin walkout',
        'take the l',
        'Popular',
        'hip sway',
        'cute feet kicking',
    },
    Callback = function()
        if Flags.EmoteEnabled then
            Play()
        end
    end,
})

local AutoBlockSection = CharacterPage:Section({
    Name = 'Auto Block',
    Side = 2,
})

Flags.GodBlockEnabled = false
Flags.HideAnimationsEnabled = false
getgenv().YRWL_Connection___ = {}
getgenv().BlockedAnimations = {
    'rbxassetid://2788289281',
    'rbxassetid://507766388',
    'rbxassetid://2788292075',
    'rbxassetid://278829075',
    'rbxassetid://4798175381',
    'rbxassetid://2953512033',
    'rbxassetid://2788309982',
    'rbxassetid://2788312709',
    'rbxassetid://2788313790',
    'rbxassetid://2788316350',
    'rbxassetid://2788315673',
    'rbxassetid://2788314837',
}
ReplicatedStorage:WaitForChild('ClientAnimations').Block.AnimationId = 'rbxassetid://0'

local function startAutoBlock()
    table.insert(getgenv().YRWL_Connection___, RunService.Stepped:Connect(function()
        if Flags.GodBlockEnabled then
            local character = LocalPlayer.Character

            if character and character:FindFirstChild('BodyEffects') then
                local bodyEffects = character.BodyEffects

                if bodyEffects:FindFirstChild('Block') then
                    bodyEffects.Block:Destroy()
                end

                local tool = character:FindFirstChildWhichIsA('Tool')

                if tool and tool:FindFirstChild('Ammo') then
                    ReplicatedStorage.MainEvent:FireServer('Block', false)
                else
                    ReplicatedStorage.MainEvent:FireServer('Block', true)
                    wait()
                    ReplicatedStorage.MainEvent:FireServer('Block', false)
                end
            end
        end
    end))
end
local function stopAutoBlock()
    for _, connection in ipairs(getgenv().YRWL_Connection___)do
        connection:Disconnect()
    end

    table.clear(getgenv().YRWL_Connection___)
end
local function startHidingAnimations()
    RunService:BindToRenderStep('Hide - Block', 0, function()
        if Flags.HideAnimationsEnabled then
            local character = LocalPlayer.Character

            if character then
                local humanoid = character:FindFirstChildWhichIsA('Humanoid')

                if humanoid then
                    for _, animationTrack in pairs(humanoid:GetPlayingAnimationTracks())do
                        if table.find(getgenv().BlockedAnimations, animationTrack.Animation.AnimationId) then
                            animationTrack:Stop()
                        end
                    end
                end
            end
        end
    end)
end
local function stopHidingAnimations()
    RunService:UnbindFromRenderStep('Hide - Block')
end

AutoBlockSection:Toggle({
    Name = 'God Block',
    Flag = 'GodBlockEnabled',
    Default = false,
    Callback = function(state)
        if state then
            startAutoBlock()
        else
            stopAutoBlock()
        end
    end,
})
AutoBlockSection:Toggle({
    Name = 'Hide Animations',
    Flag = 'HideAnimationsEnabled',
    Default = false,
    Callback = function(state)
        if not Flags.GodBlockEnabled then
            Flags.HideAnimationsEnabled = false

            return
        end
        if state then
            startHidingAnimations()
        else
            stopHidingAnimations()
        end
    end,
})

local ModificationsSection = MiscPage:Section({
    Name = 'Modifications',
    Side = 1,
})

Flags.AntiStompEnabled = true
Flags.FlashbackEnabled = false

local lastPosition = nil

local function startAntiStomp()
    local RunService = game:GetService('RunService')

    local function checkAndKill()
        local chr = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        local hum = chr:WaitForChild('Humanoid', 5)
        local bodyEffects = chr:WaitForChild('BodyEffects', 5)

        if not bodyEffects or not hum then
            warn('BodyEffects or Humanoid not found in the character!')

            return
        end

        local koValue = bodyEffects:WaitForChild('K.O', 5)

        if not koValue then
            warn('K.O value not found!')

            return
        end

        local connection

        connection = RunService.Heartbeat:Connect(function()
            if not Flags.AntiStompEnabled then
                connection:Disconnect()

                return
            else
                if hum.Health <= 5 or (koValue and koValue.Value) then
                    local tool = chr:FindFirstChildOfClass('Tool')

                    if tool then
                        tool.Parent = LocalPlayer.Backpack
                    end

                    for _, v in pairs(chr:GetChildren())do
                        if v:IsA('MeshPart') or v:IsA('Part') then
                            v:Destroy()
                        end
                    end
                    for _, v in pairs(chr:GetChildren())do
                        if v:IsA('Accessory') then
                            if v:FindFirstChild('Handle') then
                                v.Handle:Destroy()
                            end
                        end
                    end
                end
            end
            if koValue.Value == true and hum.Health > 0 then
                if Flags.FlashbackEnabled then
                    lastPosition = chr:GetPrimaryPartCFrame()
                end

                hum.Health = 0
            end
        end)
    end

    checkAndKill()
    LocalPlayer.CharacterAdded:Connect(function(newCharacter)
        if Flags.AntiStompEnabled then
            checkAndKill()

            if Flags.FlashbackEnabled and lastPosition then
                local rootPart = newCharacter:WaitForChild('HumanoidRootPart', 5)

                if rootPart then
                    while(rootPart.Position - lastPosition.Position).Magnitude > 5 do
                        rootPart.CFrame = lastPosition

                        task.wait()
                    end
                end

                lastPosition = nil
            end
        end
    end)
end

if Flags.AntiStompEnabled then
    startAntiStomp()
end

ModificationsSection:Toggle({
    Name = 'Anti Stomp',
    Flag = 'AntiStompEnabled',
    Default = true,
    Callback = function(state)
        if state then
            startAntiStomp()
        end
    end,
})
ModificationsSection:Toggle({
    Name = 'Flashback',
    Flag = 'FlashbackEnabled',
    Default = false,
})

local AutoBuySection = MiscPage:Section({
    Name = 'Auto Buy',
    Side = 2,
})
local Workspace = game:GetService('Workspace')
local ShopFolder = Workspace:WaitForChild('Ignored'):WaitForChild('Shop')

Flags.SelectedItems = {}

local Debounce = false

Flags.AutoBuyEnabled = false
Flags.AutoAmmoEnabled = true

local ShopItems = {
    '[AUG] - $2195',
    '[Rifle] - $1745',
    '[LMG] - $4221',
}
local AmmoMap = {
    ['[AUG] - $2195'] = '90 [AUG Ammo] - $90',
    ['[LMG] - $4221'] = '200 [LMG Ammo] - $338',
    ['[Rifle] - $1745'] = '5 [Rifle Ammo] - $281',
}

AutoBuySection:Dropdown({
    Name = 'Select Items',
    Flag = 'SelectedItems',
    Default = {
        '[AUG] - $2195',
        '[Rifle] - $1745',
    },
    Multi = true,
    Items = ShopItems,
})

local function GetCharacterRoot()
    local Character = LocalPlayer.Character

    return Character and Character:FindFirstChild('HumanoidRootPart')
end
local function BuyItem(ItemName)
    if not ItemName or Debounce then
        return
    end

    Debounce = true

    local wasAutoKill = Flags.AutoKill

    if wasAutoKill then
        Flags.AutoKill = false
    end

    local RootPart = GetCharacterRoot()

    if not RootPart then
        return
    end

    local saved = RootPart.CFrame
    local ItemModel = ShopFolder:FindFirstChild(ItemName)

    if ItemModel then
        local ClickDetector = ItemModel:FindFirstChildOfClass('ClickDetector')

        if ClickDetector then
            RootPart.CFrame = CFrame.new(ItemModel.Head.Position)

            fireclickdetector(ClickDetector)
            RunService:BindToRenderStep('RestoreBuy', 199, function()
                RootPart.CFrame = saved

                RunService:UnbindFromRenderStep('RestoreBuy')
            end)
        end
    end

    Debounce = false

    if wasAutoKill then
        Flags.AutoKill = true
    end
end
local function BuyItems()
    for _, item in pairs(Flags.SelectedItems)do
        BuyItem(item)
        task.wait(0.2)
    end
end
local function BuyAmmo()
    for _, item in pairs(Flags.SelectedItems)do
        local AmmoItem = AmmoMap[item]

        if AmmoItem then
            BuyItem(AmmoItem)
        end
    end
end

RunService.Heartbeat:Connect(function()
    if not Flags.AutoBuyEnabled or not LocalPlayer.Character then
        return
    end

    for _, item in pairs(Flags.SelectedItems)do
        local gunName = string.match(item, '^(%[%w+%])')

        if not gunName then
            continue
        end

        local hasGun = LocalPlayer.Backpack:FindFirstChild(gunName) or LocalPlayer.Character:FindFirstChild(gunName)

        if not hasGun then
            BuyItem(item)
        end

        local ammoCount = getAmmoCount(gunName)

        if hasGun and ammoCount == 0 and Flags.AutoAmmoEnabled then
            local ammoItem = AmmoMap[item]

            if ammoItem then
                BuyItem(ammoItem)
            end
        end
    end
end)
LocalPlayer.CharacterAdded:Connect(function(char)
    task.wait(1.4)

    Debounce = false

    if Flags.AutoBuyEnabled then
        BuyItems()
    end
end)
AutoBuySection:Toggle({
    Name = 'Auto Gun',
    Flag = 'AutoBuyEnabled',
    Default = false,
})
AutoBuySection:Toggle({
    Name = 'Auto Ammo',
    Flag = 'AutoAmmoEnabled',
    Default = true,
})

local buyButton = AutoBuySection:Button({
    Name = 'Buy Item',
    Callback = BuyItems,
})

buyButton:Add('Buy Ammo', BuyAmmo)
LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)

    ShopFolder = Workspace:WaitForChild('Ignored'):WaitForChild('Shop')
end)

Flags.AntiVoidEnabled = true

ModificationsSection:Toggle({
    Name = 'Anti Void',
    Flag = 'AntiVoidEnabled',
    Default = true,
    Callback = function(state)
        if state then
            workspace.FallenPartsDestroyHeight = -math.huge
        else
            workspace.FallenPartsDestroyHeight = -500
        end
    end,
})

Flags.AutoArmorEnabled = false
Flags.AutoFArmorEnabled = false
Flags.ArmorThreshold = 75
Flags.FArmorThreshold = 75

local dataFolder = LocalPlayer:WaitForChild('DataFolder')
local armorInfo = dataFolder:WaitForChild('Information'):FindFirstChild('ArmorSave') or nil
local fireArmorInfo = dataFolder:WaitForChild('Information'):FindFirstChild('FireArmorSave') or nil
local armorShop = workspace.Ignored.Shop['[High-Medium Armor] - $2589']
local fireArmorShop = workspace.Ignored.Shop['[Fire Armor] - $4501']
local armorClickDetector = armorShop.ClickDetector
local fireArmorClickDetector = fireArmorShop.ClickDetector

local function canBuyArmor()
    local character = LocalPlayer.Character

    if not character then
        return false
    end

    local humanoid = character:FindFirstChild('Humanoid')

    if humanoid and humanoid.Health <= 1 then
        return false
    end

    local bodyEffects = character:FindFirstChild('BodyEffects')
    local isKO = bodyEffects and bodyEffects:FindFirstChild('K.O') and bodyEffects['K.O'].Value

    if isKO then
        return false
    end

    return true
end
local function teleportAndBuy(shop, clickDetector)
    local character = LocalPlayer.Character

    if not character or not character.PrimaryPart then
        return
    end

    local wasAutoKill = Flags.AutoKill

    if wasAutoKill then
        Flags.AutoKill = false
    end

    local savedd = character.PrimaryPart.CFrame

    character:SetPrimaryPartCFrame(shop.Head.CFrame)
    fireclickdetector(clickDetector)
    RunService:BindToRenderStep('RestoreArmor', 199, function()
        character.PrimaryPart.CFrame = savedd

        RunService:UnbindFromRenderStep('RestoreArmor')
    end)

    if wasAutoKill then
        Flags.AutoKill = true
    end
end
local function buyArmor()
    if armorInfo and Flags.AutoArmorEnabled and tonumber(armorInfo.Value) < Flags.ArmorThreshold and canBuyArmor() then
        teleportAndBuy(armorShop, armorClickDetector)
    end
end
local function buyFireArmor()
    if fireArmorInfo and Flags.AutoFArmorEnabled and tonumber(fireArmorInfo.Value) < Flags.FArmorThreshold and canBuyArmor() then
        teleportAndBuy(fireArmorShop, fireArmorClickDetector)
    end
end
local function checkArmor()
    while task.wait(0.1) do
        buyArmor()
        buyFireArmor()
    end
end

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1.4)
    task.spawn(checkArmor)
end)
task.spawn(checkArmor)
ModificationsSection:Toggle({
    Name = 'Auto Armor',
    Flag = 'AutoArmorEnabled',
    Default = false,
})
ModificationsSection:Slider({
    Name = 'Armor Threshold',
    Flag = 'ArmorThreshold',
    Default = 75,
    Min = 1,
    Max = 130,
    Decimals = 1,
})
ModificationsSection:Toggle({
    Name = 'Auto Fire Armor',
    Flag = 'AutoFArmorEnabled',
    Default = false,
})
ModificationsSection:Slider({
    Name = 'Fire Armor Threshold',
    Flag = 'FArmorThreshold',
    Default = 75,
    Min = 1,
    Max = 130,
    Decimals = 1,
})

Flags.AntiSitEnabled = true

local AntiSitcc

ModificationsSection:Toggle({
    Name = 'Anti Sit',
    Flag = 'AntiSitEnabled',
    Default = true,
    Callback = function(state)
        if state then
            AntiSitcc = RunService.RenderStepped:Connect(function()
                local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass('Humanoid')

                if hum and hum.Sit then
                    hum.Sit = false
                end
            end)
        else
            if AntiSitcc then
                AntiSitcc:Disconnect()

                AntiSitcc = nil
            end
        end
    end,
})
ModificationsSection:Button({
    Name = 'Force Reset',
    Callback = function()
        LocalPlayer.Character.Humanoid.Health = 0
    end,
})
coroutine.wrap(function()
    Flags.ModDetectionEnabled = true
    Flags.CheckModFriendsEnabled = true
    Flags.GroupCheckEnabled = true
    Flags.AntiModMethod = 'Notify'

    local modList = {
        163721789,
        15427717,
        201454243,
        822999,
        63794379,
        17260230,
        28357488,
        93101606,
        8195210,
        89473551,
        16917269,
        85989579,
        1553950697,
        476537893,
        155627580,
        31163456,
        7200829,
        25717070,
        201454243,
        15427717,
        63794379,
        16138978,
        60660789,
        17260230,
        16138978,
        1161411094,
        9125623,
        11319153,
        34758833,
        194109750,
        35616559,
        1257271138,
        28885841,
        23558830,
        25717070,
        4255947062,
        29242182,
        2395613299,
        3314981799,
        3390225662,
        2459178,
        2846299656,
        2967502742,
        7001683347,
        7312775547,
        328566086,
        170526279,
        99356639,
        352087139,
        6074834798,
        2212830051,
        3944434729,
        5136267958,
        84570351,
        542488819,
        1830168970,
        3950637598,
        1962396833,
    }
    local groupIDs = {10604500, 17215700}

    local function detectModerators()
        while Flags.ModDetectionEnabled do
            task.wait(1)

            for _, player in ipairs(Players:GetPlayers())do
                if table.find(modList, player.UserId) then
                    local message = '\u{26a0}\u{fe0f} MODERATOR DETECTED: ' .. player.DisplayName .. ' (' .. player.Name .. ')'

                    if Flags.AntiModMethod == 'Notify' then
                        CreateNotification(message, 3)
                    else
                        game.Players.LocalPlayer:Kick('\u{1f6a8} ' .. message)
                    end
                end
                if Flags.GroupCheckEnabled then
                    for _, groupID in ipairs(groupIDs)do
                        local success, isInGroup = pcall(function()
                            return player:IsInGroup(groupID)
                        end)

                        if success and isInGroup then
                            local roleName = 'Unknown Role'

                            pcall(function()
                                roleName = player:GetRoleInGroup(groupID)
                            end)

                            local groupMessage = '\u{26a0}\u{fe0f} [' .. roleName .. '] JOINED: ' .. player.DisplayName .. ' (' .. player.Name .. ')'

                            if Flags.AntiModMethod == 'Notify' then
                                CreateNotification(groupMessage, 3)
                            else
                                game.Players.LocalPlayer:Kick('\u{1f6a8} ' .. groupMessage)
                            end
                        end
                    end
                end
            end
        end
    end
    local function checkFriendsWithMods()
        while Flags.CheckModFriendsEnabled do
            task.wait(1)

            for _, player in ipairs(Players:GetPlayers())do
                pcall(function()
                    for _, friend in pairs(player:GetFriendsAsync():GetCurrentPage())do
                        if table.find(modList, friend.Id) then
                            local friendMessage = '\u{26a0}\u{fe0f} ' .. player.DisplayName .. ' (' .. player.Name .. ') is friends with a Moderator!'

                            CreateNotification(friendMessage, 4)

                            break
                        end
                    end
                end)
            end
        end
    end

    local AntiModSection = MiscPage:Section({
        Name = 'Detection',
        Side = 2,
    })

    AntiModSection:Toggle({
        Name = 'Mod Detection',
        Flag = 'ModDetectionEnabled',
        Default = true,
        Callback = function(Value)
            CreateNotification(Value and '\u{2705} Anti-Mod Enabled' or '\u{26a0}\u{fe0f} Anti-Mod Disabled', 3)

            if Value then
                task.spawn(detectModerators)
            end
        end,
    })
    AntiModSection:Dropdown({
        Name = 'Anti-Mod Method',
        Flag = 'AntiModMethod',
        Default = 'Notify',
        Multi = false,
        Items = {
            'Notify',
            'Kick',
        },
        Callback = function(Value)
            CreateNotification('\u{2139}\u{fe0f} Anti-Mod Method set to: ' .. Value, 3)
        end,
    })
    AntiModSection:Toggle({
        Name = 'Friended Checking',
        Flag = 'CheckModFriendsEnabled',
        Default = true,
        Callback = function(Value)
            CreateNotification(Value and '\u{2705} Checking for Mod Friends Enabled' or '\u{26a0}\u{fe0f} Checking for Mod Friends Disabled', 3)

            if Value then
                task.spawn(checkFriendsWithMods)
            end
        end,
    })
    AntiModSection:Toggle({
        Name = 'Group Role Checking',
        Flag = 'GroupCheckEnabled',
        Default = true,
        Callback = function(Value)
            CreateNotification(Value and '\u{2705} Group Membership Check Enabled' or '\u{26a0}\u{fe0f} Group Membership Check Disabled', 3)

            if Value then
                task.spawn(detectModerators)
            end
        end,
    })

    local AnimationSection = CharacterPage:Section({
        Name = 'Animation',
        Side = 1,
    })

    Flags.KeepOnDeath = false

    local AnimationSets = {
        Default = {
            idle1 = 'http://www.roblox.com/asset/?id=180435571',
            idle2 = 'http://www.roblox.com/asset/?id=180435792',
            walk = 'http://www.roblox.com/asset/?id=180426354',
            run = 'http://www.roblox.com/asset/?id=180426354',
            jump = 'http://www.roblox.com/asset/?id=125750702',
            climb = 'http://www.roblox.com/asset/?id=180436334',
            fall = 'http://www.roblox.com/asset/?id=180436148',
        },
        Ninja = {
            idle1 = 'http://www.roblox.com/asset/?id=656117400',
            idle2 = 'http://www.roblox.com/asset/?id=656118341',
            walk = 'http://www.roblox.com/asset/?id=656121766',
            run = 'http://www.roblox.com/asset/?id=656118852',
            jump = 'http://www.roblox.com/asset/?id=656117878',
            climb = 'http://www.roblox.com/asset/?id=656114359',
            fall = 'http://www.roblox.com/asset/?id=656115606',
        },
        Superhero = {
            idle1 = 'http://www.roblox.com/asset/?id=616111295',
            idle2 = 'http://www.roblox.com/asset/?id=616113536',
            walk = 'http://www.roblox.com/asset/?id=616122287',
            run = 'http://www.roblox.com/asset/?id=616117076',
            jump = 'http://www.roblox.com/asset/?id=616115533',
            climb = 'http://www.roblox.com/asset/?id=616104706',
            fall = 'http://www.roblox.com/asset/?id=616108001',
        },
        Robot = {
            idle1 = 'http://www.roblox.com/asset/?id=616088211',
            idle2 = 'http://www.roblox.com/asset/?id=616089559',
            walk = 'http://www.roblox.com/asset/?id=616095330',
            run = 'http://www.roblox.com/asset/?id=616091570',
            jump = 'http://www.roblox.com/asset/?id=616090535',
            climb = 'http://www.roblox.com/asset/?id=616086039',
            fall = 'http://www.roblox.com/asset/?id=616087089',
        },
        Cartoon = {
            idle1 = 'http://www.roblox.com/asset/?id=742637544',
            idle2 = 'http://www.roblox.com/asset/?id=742638445',
            walk = 'http://www.roblox.com/asset/?id=742640026',
            run = 'http://www.roblox.com/asset/?id=742638842',
            jump = 'http://www.roblox.com/asset/?id=742637942',
            climb = 'http://www.roblox.com/asset/?id=742636889',
            fall = 'http://www.roblox.com/asset/?id=742637151',
        },
        Catwalk = {
            idle1 = 'http://www.roblox.com/asset/?id=133806214992291',
            idle2 = 'http://www.roblox.com/asset/?id=94970088341563',
            walk = 'http://www.roblox.com/asset/?id=109168724482748',
            run = 'http://www.roblox.com/asset/?id=81024476153754',
            jump = 'http://www.roblox.com/asset/?id=116936326516985',
            climb = 'http://www.roblox.com/asset/?id=119377220967554',
            fall = 'http://www.roblox.com/asset/?id=92294537340807',
        },
        Zombie = {
            idle1 = 'http://www.roblox.com/asset/?id=616158929',
            idle2 = 'http://www.roblox.com/asset/?id=616160636',
            walk = 'http://www.roblox.com/asset/?id=616168032',
            run = 'http://www.roblox.com/asset/?id=616163682',
            jump = 'http://www.roblox.com/asset/?id=616161997',
            climb = 'http://www.roblox.com/asset/?id=616156119',
            fall = 'http://www.roblox.com/asset/?id=616157476',
        },
        Mage = {
            idle1 = 'http://www.roblox.com/asset/?id=707742142',
            idle2 = 'http://www.roblox.com/asset/?id=707855907',
            walk = 'http://www.roblox.com/asset/?id=707897309',
            run = 'http://www.roblox.com/asset/?id=707861613',
            jump = 'http://www.roblox.com/asset/?id=707853694',
            climb = 'http://www.roblox.com/asset/?id=707826056',
            fall = 'http://www.roblox.com/asset/?id=707829716',
        },
        Pirate = {
            idle1 = 'http://www.roblox.com/asset/?id=750785693',
            idle2 = 'http://www.roblox.com/asset/?id=750782770',
            walk = 'http://www.roblox.com/asset/?id=750785693',
            run = 'http://www.roblox.com/asset/?id=750782770',
            jump = 'http://www.roblox.com/asset/?id=750782770',
            climb = 'http://www.roblox.com/asset/?id=750782770',
            fall = 'http://www.roblox.com/asset/?id=750782770',
        },
        Knight = {
            idle1 = 'http://www.roblox.com/asset/?id=657595757',
            idle2 = 'http://www.roblox.com/asset/?id=657568135',
            walk = 'http://www.roblox.com/asset/?id=657552124',
            run = 'http://www.roblox.com/asset/?id=657564596',
            jump = 'http://www.roblox.com/asset/?id=657560148',
            climb = 'http://www.roblox.com/asset/?id=657556206',
            fall = 'http://www.roblox.com/asset/?id=657552124',
        },
        Vampire = {
            idle1 = 'http://www.roblox.com/asset/?id=1083465857',
            idle2 = 'http://www.roblox.com/asset/?id=1083465857',
            walk = 'http://www.roblox.com/asset/?id=1083465857',
            run = 'http://www.roblox.com/asset/?id=1083465857',
            jump = 'http://www.roblox.com/asset/?id=1083465857',
            climb = 'http://www.roblox.com/asset/?id=1083465857',
            fall = 'http://www.roblox.com/asset/?id=1083465857',
        },
        Bubbly = {
            idle1 = 'http://www.roblox.com/asset/?id=910004836',
            idle2 = 'http://www.roblox.com/asset/?id=910009958',
            walk = 'http://www.roblox.com/asset/?id=910034870',
            run = 'http://www.roblox.com/asset/?id=910025107',
            jump = 'http://www.roblox.com/asset/?id=910016857',
            climb = 'http://www.roblox.com/asset/?id=910009958',
            fall = 'http://www.roblox.com/asset/?id=910009958',
        },
        Elder = {
            idle1 = 'http://www.roblox.com/asset/?id=845386501',
            idle2 = 'http://www.roblox.com/asset/?id=845397899',
            walk = 'http://www.roblox.com/asset/?id=845403856',
            run = 'http://www.roblox.com/asset/?id=845386501',
            jump = 'http://www.roblox.com/asset/?id=845386501',
            climb = 'http://www.roblox.com/asset/?id=845386501',
            fall = 'http://www.roblox.com/asset/?id=845386501',
        },
        Toy = {
            idle1 = 'http://www.roblox.com/asset/?id=782841498',
            idle2 = 'http://www.roblox.com/asset/?id=782841498',
            walk = 'http://www.roblox.com/asset/?id=782841498',
            run = 'http://www.roblox.com/asset/?id=782841498',
            jump = 'http://www.roblox.com/asset/?id=782841498',
            climb = 'http://www.roblox.com/asset/?id=782841498',
            fall = 'http://www.roblox.com/asset/?id=782841498',
        },
    }

    local function applyCustomAnimations(character)
        if not character then
            return
        end

        local Animate = character:FindFirstChild('Animate')

        if not Animate then
            return
        end

        local ClonedAnimate = Animate:Clone()

        ClonedAnimate.idle.Animation1.AnimationId = AnimationSets[Flags.Idle1Animation].idle1
        ClonedAnimate.idle.Animation2.AnimationId = AnimationSets[Flags.Idle2Animation].idle2
        ClonedAnimate.walk.WalkAnim.AnimationId = AnimationSets[Flags.WalkAnimation].walk
        ClonedAnimate.run.RunAnim.AnimationId = AnimationSets[Flags.RunAnimation].run
        ClonedAnimate.jump.JumpAnim.AnimationId = AnimationSets[Flags.JumpAnimation].jump
        ClonedAnimate.climb.ClimbAnim.AnimationId = AnimationSets[Flags.ClimbAnimation].climb
        ClonedAnimate.fall.FallAnim.AnimationId = AnimationSets[Flags.FallAnimation].fall

        Animate:Destroy()

        ClonedAnimate.Parent = character
    end

    LocalPlayer.CharacterAdded:Connect(function(character)
        if Flags.KeepOnDeath then
            task.wait(1)
            applyCustomAnimations(character)
        end
    end)

    local animationNames = {
        'Default',
        'Ninja',
        'Superhero',
        'Robot',
        'Cartoon',
        'Catwalk',
        'Zombie',
        'Mage',
        'Pirate',
        'Knight',
        'Vampire',
        'Bubbly',
        'Elder',
        'Toy',
    }

    AnimationSection:Dropdown({
        Name = 'Idle1',
        Flag = 'Idle1Animation',
        Default = 'Default',
        Multi = false,
        Items = animationNames,
        Callback = function(Value)
            applyCustomAnimations(LocalPlayer.Character)
        end,
    })
    AnimationSection:Dropdown({
        Name = 'Idle2',
        Flag = 'Idle2Animation',
        Default = 'Default',
        Multi = false,
        Items = animationNames,
        Callback = function(Value)
            applyCustomAnimations(LocalPlayer.Character)
        end,
    })
    AnimationSection:Dropdown({
        Name = 'Walk',
        Flag = 'WalkAnimation',
        Default = 'Default',
        Multi = false,
        Items = animationNames,
        Callback = function(Value)
            applyCustomAnimations(LocalPlayer.Character)
        end,
    })
    AnimationSection:Dropdown({
        Name = 'Run',
        Flag = 'RunAnimation',
        Default = 'Default',
        Multi = false,
        Items = animationNames,
        Callback = function(Value)
            applyCustomAnimations(LocalPlayer.Character)
        end,
    })
    AnimationSection:Dropdown({
        Name = 'Jump',
        Flag = 'JumpAnimation',
        Default = 'Default',
        Multi = false,
        Items = animationNames,
        Callback = function(Value)
            applyCustomAnimations(LocalPlayer.Character)
        end,
    })
    AnimationSection:Dropdown({
        Name = 'Climb',
        Flag = 'ClimbAnimation',
        Default = 'Default',
        Multi = false,
        Items = animationNames,
        Callback = function(Value)
            applyCustomAnimations(LocalPlayer.Character)
        end,
    })
    AnimationSection:Dropdown({
        Name = 'Fall',
        Flag = 'FallAnimation',
        Default = 'Default',
        Multi = false,
        Items = animationNames,
        Callback = function(Value)
            applyCustomAnimations(LocalPlayer.Character)
        end,
    })
    AnimationSection:Toggle({
        Name = 'Keep On Death',
        Flag = 'KeepOnDeath',
        Default = false,
    })
end)()
